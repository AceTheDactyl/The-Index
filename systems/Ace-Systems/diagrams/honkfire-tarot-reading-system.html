<!DOCTYPE html>
<html lang="en">
<head>
  <meta charset="utf-8"/>
  <title>HONKFIRE TAROT — Quantum Reading System</title>
  <meta name="viewport" content="width=device-width,initial-scale=1"/>
  <link href="https://fonts.googleapis.com/css2?family=Cinzel:wght@400;600;700&family=Cinzel+Decorative:wght@400;700&display=swap" rel="stylesheet">
  <style>
    :root {
      --bg: #08080c; --bg-alt: #0f0f15; --card-bg: #12121a; --card-alt: #1a1a24;
      --border: rgba(212, 175, 55, 0.3); --text: #e8e4d9; --muted: #8a8578;
      --gold: #d4af37; --gold-bright: #ffd700; --quantum-purple: #9d4edd;
      --flame-orange: #ff6b1a; --duck-teal: #1a7a6c; --oak-green: #4a7023;
      --row-past: #9d4edd; --row-present: #ffd700; --row-future: #1a7a6c;
    }
    * { box-sizing: border-box; margin: 0; padding: 0; }
    body { font-family: 'Cinzel', serif; background: radial-gradient(ellipse at top, #1a1a24 0%, #08080c 60%, #050508 100%); color: var(--text); min-height: 100vh; line-height: 1.6; }
    .quantum-field { position: fixed; inset: 0; pointer-events: none; z-index: 0; overflow: hidden; }
    .quantum-field::before { content: ''; position: absolute; inset: -50%; background: radial-gradient(ellipse at 20% 30%, rgba(157, 78, 221, 0.08) 0%, transparent 50%), radial-gradient(ellipse at 80% 70%, rgba(255, 107, 26, 0.06) 0%, transparent 50%), radial-gradient(ellipse at 50% 50%, rgba(26, 122, 108, 0.05) 0%, transparent 40%); animation: quantumDrift 30s ease-in-out infinite; }
    @keyframes quantumDrift { 0%, 100% { transform: rotate(0deg) scale(1); } 50% { transform: rotate(180deg) scale(1.2); } }
    .frame { max-width: 1200px; margin: 0 auto; padding: 24px 16px 40px; position: relative; z-index: 1; }
    header { margin-bottom: 20px; border-bottom: 1px solid var(--border); padding-bottom: 14px; }
    .header-row { display: flex; justify-content: space-between; align-items: flex-start; gap: 20px; flex-wrap: wrap; }
    .header-title { flex: 1; }
    header h1 { font-family: 'Cinzel Decorative', serif; font-size: 1.8rem; letter-spacing: 0.08em; background: linear-gradient(135deg, var(--gold), var(--gold-bright), var(--gold)); -webkit-background-clip: text; -webkit-text-fill-color: transparent; background-clip: text; }
    header p { margin: 4px 0 0; color: var(--muted); font-size: 0.85rem; letter-spacing: 0.1em; }
    .header-controls { display: flex; gap: 10px; flex-wrap: wrap; }
    .control-btn { display: flex; align-items: center; gap: 8px; padding: 10px 16px; background: linear-gradient(135deg, rgba(157, 78, 221, 0.15), rgba(255, 107, 26, 0.15)); border: 1px solid var(--border); border-radius: 8px; color: var(--text); font-family: 'Cinzel', serif; font-size: 0.75rem; font-weight: 600; text-transform: uppercase; letter-spacing: 0.08em; cursor: pointer; transition: all 0.2s ease; }
    .control-btn:hover { background: linear-gradient(135deg, rgba(157, 78, 221, 0.25), rgba(255, 107, 26, 0.25)); border-color: var(--gold); box-shadow: 0 0 20px rgba(212, 175, 55, 0.3); transform: translateY(-1px); }
    .control-btn.redraw-btn { background: linear-gradient(135deg, rgba(157, 78, 221, 0.2), rgba(157, 78, 221, 0.15)); border-color: var(--quantum-purple); }
    .control-btn.redraw-btn:hover { background: linear-gradient(135deg, rgba(157, 78, 221, 0.35), rgba(157, 78, 221, 0.25)); box-shadow: 0 0 25px rgba(157, 78, 221, 0.4); }
    .quantum-state { display: flex; align-items: center; gap: 16px; padding: 12px 16px; background: rgba(0, 0, 0, 0.4); border: 1px solid rgba(157, 78, 221, 0.3); border-radius: 8px; margin-bottom: 20px; font-family: monospace; font-size: 0.75rem; flex-wrap: wrap; }
    .quantum-indicator { display: flex; align-items: center; gap: 6px; }
    .quantum-dot { width: 8px; height: 8px; border-radius: 50%; background: var(--quantum-purple); animation: quantumPulse 1.5s ease-in-out infinite; }
    .quantum-dot.locked { background: var(--gold); animation: none; box-shadow: 0 0 10px var(--gold); }
    @keyframes quantumPulse { 0%, 100% { opacity: 0.4; transform: scale(0.8); } 50% { opacity: 1; transform: scale(1.2); } }
    .quantum-coords { color: var(--muted); }
    .quantum-coords span { color: var(--text); margin: 0 4px; }
    .spread-grid { display: grid; grid-template-columns: repeat(3, minmax(0, 1fr)); gap: 16px; margin-top: 20px; }
    .spread-panel { background: linear-gradient(135deg, var(--card-bg), var(--card-alt)); border-radius: 14px; border: 2px solid var(--border); box-shadow: 0 12px 28px rgba(0, 0, 0, 0.45); display: flex; flex-direction: column; min-height: 320px; overflow: hidden; cursor: pointer; transition: transform 0.3s ease, box-shadow 0.3s ease, border-color 0.3s ease; position: relative; }
    .spread-panel:hover { transform: translateY(-4px); box-shadow: 0 20px 50px rgba(212, 175, 55, 0.2); border-color: var(--gold); }
    .spread-panel.empty { opacity: 0.5; cursor: default; }
    .spread-panel.empty:hover { transform: none; box-shadow: 0 12px 28px rgba(0, 0, 0, 0.45); border-color: var(--border); }
    .spread-panel.row-past { border-top: 3px solid var(--row-past); }
    .spread-panel.row-present { border-top: 3px solid var(--row-present); }
    .spread-panel.row-future { border-top: 3px solid var(--row-future); }
    .panel-header { padding: 10px 12px 8px; border-bottom: 1px solid rgba(212, 175, 55, 0.15); display: flex; justify-content: space-between; align-items: flex-start; flex-shrink: 0; }
    .panel-position { font-size: 0.65rem; text-transform: uppercase; letter-spacing: 0.12em; color: var(--muted); }
    .panel-numeral { font-size: 0.75rem; color: var(--gold); font-weight: 600; }
    .panel-card-display { flex: 1; display: flex; align-items: center; justify-content: center; padding: 10px; min-height: 200px; }
    .panel-card-display svg { width: 100%; height: 100%; max-height: 180px; }
    .panel-empty-state { color: var(--muted); font-size: 0.8rem; text-align: center; opacity: 0.6; }
    .panel-empty-state .sigil { font-size: 2rem; margin-bottom: 8px; opacity: 0.3; }
    .panel-info { padding: 10px 12px; border-top: 1px solid rgba(212, 175, 55, 0.15); text-align: center; flex-shrink: 0; }
    .panel-greek { font-family: 'Times New Roman', serif; font-size: 1rem; color: var(--gold); letter-spacing: 0.15em; margin-bottom: 4px; }
    .panel-title { font-size: 0.8rem; color: var(--text); font-weight: 600; margin-bottom: 2px; }
    .panel-subtitle { font-size: 0.65rem; color: var(--muted); }
    .spread-panel[data-entity="squirrel"] .panel-greek { color: var(--quantum-purple); text-shadow: 0 0 8px rgba(157, 78, 221, 0.5); }
    .spread-panel[data-entity="goose"] .panel-greek { color: var(--flame-orange); text-shadow: 0 0 8px rgba(255, 107, 26, 0.5); }
    .spread-panel[data-entity="duck"] .panel-greek { color: var(--duck-teal); text-shadow: 0 0 8px rgba(77, 255, 195, 0.5); }
    .spread-panel[data-entity="oak"] .panel-greek { color: #6b8e23; text-shadow: 0 0 8px rgba(107, 142, 35, 0.5); }
    .spread-panel[data-entity="merged"] .panel-greek { color: var(--gold-bright); text-shadow: 0 0 8px rgba(255, 215, 0, 0.5); }
    .spread-legend { display: flex; justify-content: center; gap: 30px; margin-top: 20px; padding: 12px; background: rgba(0, 0, 0, 0.3); border-radius: 8px; font-size: 0.7rem; text-transform: uppercase; letter-spacing: 0.1em; }
    .legend-item { display: flex; align-items: center; gap: 8px; }
    .legend-color { width: 12px; height: 12px; border-radius: 2px; }
    .legend-color.past { background: var(--row-past); }
    .legend-color.present { background: var(--row-present); }
    .legend-color.future { background: var(--row-future); }
    .card-modal-overlay { position: fixed; inset: 0; background: rgba(5, 5, 8, 0.95); backdrop-filter: blur(12px); z-index: 1000; opacity: 0; visibility: hidden; transition: opacity 0.3s ease, visibility 0.3s ease; cursor: pointer; }
    .card-modal-overlay.active { opacity: 1; visibility: visible; }
    .card-modal-content { position: fixed; top: 50%; left: 50%; transform: translate(-50%, -50%) scale(0.9); width: 90%; max-width: 600px; max-height: 85vh; background: linear-gradient(180deg, var(--card-bg) 0%, #08080c 100%); border: 2px solid var(--gold); border-radius: 16px; z-index: 1001; opacity: 0; transition: transform 0.4s cubic-bezier(0.34, 1.56, 0.64, 1), opacity 0.3s ease; display: flex; flex-direction: column; overflow: hidden; cursor: default; }
    .card-modal-overlay.active .card-modal-content { transform: translate(-50%, -50%) scale(1); opacity: 1; }
    .modal-card-header { display: flex; gap: 16px; padding: 20px; border-bottom: 1px solid var(--border); flex-shrink: 0; }
    .modal-card-image { width: 120px; height: 160px; flex-shrink: 0; background: rgba(0, 0, 0, 0.4); border-radius: 8px; border: 1px solid var(--border); display: flex; align-items: center; justify-content: center; overflow: hidden; }
    .modal-card-image svg { width: 100%; height: 100%; }
    .modal-card-info { flex: 1; display: flex; flex-direction: column; justify-content: center; }
    .modal-numeral { font-size: 0.75rem; color: var(--gold); letter-spacing: 0.15em; margin-bottom: 4px; }
    .modal-greek { font-family: 'Times New Roman', serif; font-size: 1.4rem; letter-spacing: 0.2em; margin-bottom: 6px; }
    .modal-title { font-family: 'Cinzel Decorative', serif; font-size: 1.3rem; color: var(--text); margin-bottom: 4px; }
    .modal-subtitle { font-size: 0.85rem; color: var(--muted); margin-bottom: 8px; }
    .modal-entity { display: inline-block; padding: 4px 10px; border: 1px solid; border-radius: 4px; font-size: 0.65rem; text-transform: uppercase; letter-spacing: 0.1em; }
    .modal-card-body { flex: 1; overflow-y: auto; padding: 20px; }
    .modal-section { margin-bottom: 20px; }
    .modal-section:last-child { margin-bottom: 0; }
    .modal-section-title { font-size: 0.75rem; text-transform: uppercase; letter-spacing: 0.12em; color: var(--gold); margin-bottom: 8px; padding-bottom: 4px; border-bottom: 1px solid rgba(212, 175, 55, 0.2); }
    .modal-section-content { font-size: 0.85rem; line-height: 1.7; color: var(--text); }
    .modal-keywords { display: flex; flex-wrap: wrap; gap: 8px; margin-top: 8px; }
    .modal-keyword { padding: 4px 10px; background: rgba(212, 175, 55, 0.1); border: 1px solid rgba(212, 175, 55, 0.3); border-radius: 4px; font-size: 0.7rem; text-transform: uppercase; letter-spacing: 0.08em; color: var(--gold); }
    .ai-instruction-box { background: rgba(157, 78, 221, 0.1); border: 1px solid rgba(157, 78, 221, 0.3); border-radius: 8px; padding: 12px; margin-top: 16px; }
    .ai-instruction-title { font-size: 0.7rem; text-transform: uppercase; letter-spacing: 0.1em; color: var(--quantum-purple); margin-bottom: 8px; display: flex; align-items: center; gap: 6px; }
    .ai-instruction-content { font-family: monospace; font-size: 0.75rem; color: var(--text); line-height: 1.6; white-space: pre-wrap; }
    .modal-close-hint { text-align: center; padding: 12px; color: var(--muted); font-size: 0.7rem; border-top: 1px solid var(--border); }
    .instruction-overlay { position: fixed; inset: 0; background: rgba(5, 5, 8, 0.98); backdrop-filter: blur(16px); z-index: 2000; display: flex; align-items: center; justify-content: center; opacity: 1; transition: opacity 0.5s ease; }
    .instruction-overlay.hidden { opacity: 0; pointer-events: none; }
    .instruction-container { background: linear-gradient(135deg, var(--card-bg), var(--card-alt)); border: 2px solid var(--gold); border-radius: 16px; box-shadow: 0 0 100px rgba(212, 175, 55, 0.2); width: 90%; max-width: 700px; max-height: 90vh; display: flex; flex-direction: column; overflow: hidden; }
    .instruction-header { padding: 24px 28px 16px; border-bottom: 1px solid var(--border); text-align: center; }
    .instruction-sigil { font-size: 3rem; margin-bottom: 12px; animation: sigilPulse 3s ease-in-out infinite; }
    @keyframes sigilPulse { 0%, 100% { opacity: 0.7; transform: scale(1); } 50% { opacity: 1; transform: scale(1.1); } }
    .instruction-header h2 { font-family: 'Cinzel Decorative', serif; font-size: 1.6rem; background: linear-gradient(135deg, var(--gold), var(--gold-bright)); -webkit-background-clip: text; -webkit-text-fill-color: transparent; background-clip: text; margin-bottom: 8px; }
    .instruction-header p { color: var(--muted); font-size: 0.85rem; }
    .instruction-body { flex: 1; overflow-y: auto; padding: 24px 28px; }
    .instruction-section { margin-bottom: 24px; }
    .instruction-section h3 { font-size: 0.9rem; text-transform: uppercase; letter-spacing: 0.12em; color: var(--gold); margin-bottom: 12px; display: flex; align-items: center; gap: 10px; }
    .instruction-section h3::before { content: '⧫'; font-size: 0.7rem; }
    .instruction-section p { font-size: 0.85rem; color: var(--text); margin-bottom: 10px; line-height: 1.7; }
    .instruction-section ul { list-style: none; padding-left: 0; }
    .instruction-section li { font-size: 0.85rem; color: var(--text); margin-bottom: 8px; padding-left: 20px; position: relative; }
    .instruction-section li::before { content: '◊'; position: absolute; left: 0; color: var(--gold); }
    .quantum-formula { background: rgba(0, 0, 0, 0.4); border: 1px solid var(--border); border-radius: 8px; padding: 16px; margin: 16px 0; font-family: monospace; font-size: 0.8rem; text-align: center; }
    .quantum-formula .formula { color: var(--quantum-purple); font-size: 1rem; margin-bottom: 8px; }
    .quantum-formula .explanation { color: var(--muted); font-size: 0.75rem; }
    .instruction-footer { padding: 20px 28px; border-top: 1px solid var(--border); display: flex; gap: 16px; justify-content: center; flex-wrap: wrap; }
    .begin-btn { padding: 14px 40px; background: linear-gradient(135deg, var(--gold), var(--gold-bright)); border: none; border-radius: 8px; color: #08080c; font-family: 'Cinzel', serif; font-size: 0.9rem; font-weight: 700; text-transform: uppercase; letter-spacing: 0.15em; cursor: pointer; transition: all 0.3s ease; }
    .begin-btn:hover { transform: translateY(-2px); box-shadow: 0 10px 40px rgba(212, 175, 55, 0.4); }
    .begin-btn.secondary { background: transparent; border: 2px solid var(--gold); color: var(--gold); }
    .begin-btn.secondary:hover { background: rgba(212, 175, 55, 0.1); }
    .export-overlay { position: fixed; inset: 0; background: rgba(5, 5, 8, 0.95); backdrop-filter: blur(12px); z-index: 1500; display: flex; align-items: center; justify-content: center; opacity: 0; visibility: hidden; transition: opacity 0.3s ease, visibility 0.3s ease; }
    .export-overlay.active { opacity: 1; visibility: visible; }
    .export-container { background: linear-gradient(135deg, var(--card-bg), var(--card-alt)); border: 2px solid var(--gold); border-radius: 16px; width: 90%; max-width: 600px; max-height: 85vh; display: flex; flex-direction: column; overflow: hidden; }
    .export-header { padding: 20px 24px; border-bottom: 1px solid var(--border); }
    .export-header h3 { font-size: 1.1rem; color: var(--gold); margin-bottom: 8px; }
    .export-header p { font-size: 0.8rem; color: var(--muted); }
    .export-body { flex: 1; overflow-y: auto; padding: 20px 24px; }
    .export-form-group { margin-bottom: 16px; }
    .export-form-group label { display: block; font-size: 0.75rem; text-transform: uppercase; letter-spacing: 0.1em; color: var(--muted); margin-bottom: 6px; }
    .export-form-group input { width: 100%; padding: 10px 14px; background: rgba(0, 0, 0, 0.4); border: 1px solid var(--border); border-radius: 6px; color: var(--text); font-family: 'Cinzel', serif; font-size: 0.9rem; }
    .export-form-group input:focus { outline: none; border-color: var(--gold); }
    .export-preview { background: rgba(0, 0, 0, 0.5); border: 1px solid var(--border); border-radius: 8px; padding: 12px; margin-top: 16px; font-family: monospace; font-size: 0.7rem; color: var(--muted); max-height: 150px; overflow-y: auto; white-space: pre-wrap; }
    .export-footer { padding: 16px 24px; border-top: 1px solid var(--border); display: flex; gap: 10px; flex-wrap: wrap; justify-content: flex-end; }
    .export-btn { padding: 10px 16px; background: rgba(212, 175, 55, 0.15); border: 1px solid var(--border); border-radius: 6px; color: var(--text); font-family: 'Cinzel', serif; font-size: 0.75rem; cursor: pointer; transition: all 0.2s ease; }
    .export-btn:hover { background: rgba(212, 175, 55, 0.25); border-color: var(--gold); }
    .export-btn.primary { background: var(--gold); color: #08080c; font-weight: 600; }
    .export-btn.cancel { background: transparent; }
    .llm-guide-overlay { position: fixed; inset: 0; background: rgba(5, 5, 8, 0.95); backdrop-filter: blur(12px); z-index: 1500; display: flex; align-items: center; justify-content: center; opacity: 0; visibility: hidden; transition: opacity 0.3s ease, visibility 0.3s ease; }
    .llm-guide-overlay.active { opacity: 1; visibility: visible; }
    .llm-guide-container { background: linear-gradient(135deg, var(--card-bg), var(--card-alt)); border: 2px solid var(--quantum-purple); border-radius: 16px; width: 95%; max-width: 800px; max-height: 90vh; display: flex; flex-direction: column; overflow: hidden; }
    .llm-guide-header { padding: 20px 24px; border-bottom: 1px solid var(--border); background: rgba(157, 78, 221, 0.1); }
    .llm-guide-header h3 { font-size: 1.1rem; color: var(--quantum-purple); margin-bottom: 8px; }
    .llm-guide-header p { font-size: 0.8rem; color: var(--muted); }
    .llm-guide-body { flex: 1; overflow-y: auto; padding: 20px 24px; }
    .llm-section { margin-bottom: 24px; }
    .llm-section h4 { font-size: 0.85rem; color: var(--gold); margin-bottom: 12px; letter-spacing: 0.1em; }
    .llm-code { background: rgba(0, 0, 0, 0.5); border: 1px solid var(--border); border-radius: 8px; padding: 16px; font-family: 'Courier New', monospace; font-size: 0.72rem; color: var(--text); white-space: pre-wrap; line-height: 1.6; }
    .llm-guide-footer { padding: 16px 24px; border-top: 1px solid var(--border); display: flex; gap: 10px; justify-content: flex-end; }
    .toast { position: fixed; bottom: 30px; left: 50%; transform: translateX(-50%) translateY(100px); background: var(--card-bg); border: 1px solid var(--gold); border-radius: 8px; padding: 12px 24px; color: var(--text); font-size: 0.85rem; z-index: 3000; opacity: 0; transition: transform 0.3s ease, opacity 0.3s ease; }
    .toast.show { transform: translateX(-50%) translateY(0); opacity: 1; }
    @media (max-width: 900px) { .spread-grid { grid-template-columns: repeat(2, 1fr); } }
    @media (max-width: 600px) { .spread-grid { grid-template-columns: 1fr; } .header-row { flex-direction: column; } .header-controls { width: 100%; justify-content: center; } .spread-legend { flex-direction: column; align-items: center; gap: 8px; } }
  </style>
</head>
<body>
  <div class="quantum-field"></div>
  <div class="instruction-overlay" id="instructionOverlay">
    <div class="instruction-container">
      <div class="instruction-header">
        <div class="instruction-sigil">⧫</div>
        <h2>HONKFIRE Tarot Reading System</h2>
        <p>Quantum-Locked Nine-Card Spread</p>
      </div>
      <div class="instruction-body">
        <div class="instruction-section"><h3>The Quantum Field</h3><p>A continuous random process runs in the background, cycling through all 22 Major Arcana cards across 4 dimensional coordinates.</p><div class="quantum-formula"><div class="formula">Ψ(t) = Σ[sin(ω₁t) × cos(ω₂t) × tan(ω₃t/π)] mod 22</div><div class="explanation">Wave function collapse occurs at the moment of observation (drawing)</div></div></div>
        <div class="instruction-section"><h3>Phase-Locking</h3><p>When you draw, the field phase-locks into 9 discrete cards:</p><ul><li><strong>Row 1 (Purple):</strong> Past influences</li><li><strong>Row 2 (Gold):</strong> Present energies</li><li><strong>Row 3 (Teal):</strong> Future potentials</li></ul></div>
        <div class="instruction-section"><h3>Reading Cards</h3><p>Click any card to see traditional meaning, HONKFIRE lore, and AI instruction snippet.</p></div>
        <div class="instruction-section"><h3>Your Reading</h3><p style="font-size:0.8rem;color:var(--muted);margin-bottom:12px;">Your words attune the quantum field. Each character shifts the phase ratios [ψ, β, α, γ], weaving your intent into which cards emerge. Leave blank for a raw, uninfluenced reading.</p><div class="export-form-group" style="margin-bottom:12px;"><label style="display:block;font-size:0.7rem;text-transform:uppercase;letter-spacing:0.1em;color:var(--muted);margin-bottom:6px;">Reading Title <span style="color:var(--quantum-purple);">→ modulates ψ, β</span></label><input type="text" id="exportTitle" placeholder="My Tarot Reading" style="width:100%;padding:10px 14px;background:rgba(0,0,0,0.4);border:1px solid var(--border);border-radius:6px;color:var(--text);font-family:'Cinzel',serif;font-size:0.9rem;"></div><div class="export-form-group"><label style="display:block;font-size:0.7rem;text-transform:uppercase;letter-spacing:0.1em;color:var(--muted);margin-bottom:6px;">Question or Context <span style="color:var(--quantum-purple);">→ modulates α, γ</span></label><input type="text" id="exportNotes" placeholder="What would you like guidance on?" style="width:100%;padding:10px 14px;background:rgba(0,0,0,0.4);border:1px solid var(--border);border-radius:6px;color:var(--text);font-family:'Cinzel',serif;font-size:0.9rem;"></div><div class="quantum-formula" style="margin-top:12px;padding:10px;"><div class="formula" style="font-size:0.75rem;">Ψ′ = Ψ + sin(Σchar × 0.1) × 0.3</div><div class="explanation">Character codes rotate through [ψ,β,α,γ] positions, phase-shifting the wave function</div></div></div>
      </div>
      <div class="instruction-footer">
        <button class="begin-btn secondary" onclick="closeInstructions()">View Empty Spread</button>
        <button class="begin-btn secondary" onclick="drawRawAndClose()" style="border-color:var(--quantum-purple);color:var(--quantum-purple);">Raw Reading</button>
        <button class="begin-btn" onclick="drawAndClose()">Pull Attuned Spread</button>
      </div>
    </div>
  </div>
  <div class="frame">
    <header>
      <div class="header-row">
        <div class="header-title">
          <h1>⧫ HONKFIRE TAROT</h1>
          <p>QUANTUM READING SYSTEM · SACRED GEOMETRY EDITION</p>
        </div>
        <div class="header-controls">
          <button class="control-btn redraw-btn" onclick="newReading()"><svg width="16" height="16" viewBox="0 0 24 24" fill="none" stroke="currentColor" stroke-width="2"><path d="M23 4v6h-6M1 20v-6h6"/><path d="M3.51 9a9 9 0 0 1 14.85-3.36L23 10M1 14l4.64 4.36A9 9 0 0 0 20.49 15"/></svg>New Reading</button>
          <button class="control-btn" onclick="openExport()"><svg width="16" height="16" viewBox="0 0 24 24" fill="none" stroke="currentColor" stroke-width="2"><path d="M21 15v4a2 2 0 0 1-2 2H5a2 2 0 0 1-2-2v-4"/><polyline points="7 10 12 15 17 10"/><line x1="12" y1="15" x2="12" y2="3"/></svg>Export</button>
          <button class="control-btn" onclick="openLLMGuide()"><svg width="16" height="16" viewBox="0 0 24 24" fill="none" stroke="currentColor" stroke-width="2"><circle cx="12" cy="12" r="10"/><path d="M9.09 9a3 3 0 0 1 5.83 1c0 2-3 3-3 3"/><line x1="12" y1="17" x2="12.01" y2="17"/></svg>LLM Guide</button>
        </div>
      </div>
    </header>
    <div class="quantum-state">
      <div class="quantum-indicator"><div class="quantum-dot" id="quantumDot"></div><span id="quantumStatus">Field Active</span></div>
      <div class="quantum-coords">ψ:<span id="coordPsi">0.000</span> β:<span id="coordBeta">0.000</span> α:<span id="coordAlpha">0.000</span> γ:<span id="coordGamma">0.000</span></div>
      <div style="margin-left:auto; color: var(--muted);">Phase: <span id="phaseDisplay" style="color: var(--quantum-purple);">SUPERPOSITION</span></div>
    </div>
    <div class="spread-grid" id="spreadGrid"></div>
    <div class="spread-legend"><div class="legend-item"><div class="legend-color past"></div><span>Past</span></div><div class="legend-item"><div class="legend-color present"></div><span>Present</span></div><div class="legend-item"><div class="legend-color future"></div><span>Future</span></div></div>
  </div>
  <div class="card-modal-overlay" id="cardModalOverlay" onclick="closeCardModal(event)">
    <div class="card-modal-content" onclick="event.stopPropagation()">
      <div class="modal-card-header"><div class="modal-card-image" id="modalCardImage"></div><div class="modal-card-info"><div class="modal-numeral" id="modalNumeral"></div><div class="modal-greek" id="modalGreek"></div><h2 class="modal-title" id="modalTitle"></h2><p class="modal-subtitle" id="modalSubtitle"></p><span class="modal-entity" id="modalEntity"></span></div></div>
      <div class="modal-card-body" id="modalBody"></div>
      <div class="modal-close-hint">Click outside to close</div>
    </div>
  </div>
  <div class="export-overlay" id="exportOverlay" onclick="closeExport(event)">
    <div class="export-container" onclick="event.stopPropagation()">
      <div class="export-header"><h3>Export Reading</h3><p>Save your spread as raw card data</p></div>
      <div class="export-body"><div class="export-preview" id="exportPreview">No spread drawn yet.</div></div>
      <div class="export-footer"><button class="export-btn cancel" onclick="closeExport()">Cancel</button><button class="export-btn" onclick="copyToClipboard()">Copy Text</button><button class="export-btn" onclick="downloadJSON()">Download JSON</button><button class="export-btn primary" onclick="downloadTXT()">Download TXT</button></div>
    </div>
  </div>
  <div class="llm-guide-overlay" id="llmGuideOverlay" onclick="closeLLMGuide(event)">
    <div class="llm-guide-container" onclick="event.stopPropagation()">
      <div class="llm-guide-header">
        <h3>⚙ LLM Session Guide</h3>
        <p>Instructions for AI assistants to conduct tarot readings</p>
      </div>
      <div class="llm-guide-body">
        <div class="llm-section">
          <h4>STEP 1: LOAD & INITIALIZE</h4>
          <div class="llm-code">
1. Open this HTML file in a browser environment
2. The quantum field begins cycling automatically (observe ψ, β, α, γ coordinates updating)
3. A startup modal appears with "Pull 9-Card Spread" button
4. Click "Pull 9-Card Spread" to collapse the wave function
5. Note the LOCKED quantum state: [ψ, β, α, γ] — these determine all 9 cards
          </div>
        </div>
        <div class="llm-section">
          <h4>STEP 2: EXTRACT CARD DATA</h4>
          <div class="llm-code">
For each of the 9 positions, click the card panel to open its modal:

POSITION 1: Past Foundation    → Click card → Record AI Instruction Snippet
POSITION 2: Past Heart         → Click card → Record AI Instruction Snippet
POSITION 3: Past Outcome       → Click card → Record AI Instruction Snippet
POSITION 4: Present Challenge  → Click card → Record AI Instruction Snippet
POSITION 5: Present Self       → Click card → Record AI Instruction Snippet
POSITION 6: Present Blessing   → Click card → Record AI Instruction Snippet
POSITION 7: Future Fear        → Click card → Record AI Instruction Snippet
POSITION 8: Future Hope        → Click card → Record AI Instruction Snippet
POSITION 9: Future Destiny     → Click card → Record AI Instruction Snippet

Alternatively: Click "Export" → "Copy Text" for all cards at once
          </div>
        </div>
        <div class="llm-section">
          <h4>STEP 3: INTERPRETATION FRAMEWORK</h4>
          <div class="llm-code">
Structure your reading interpretation as follows:

A. QUANTUM SIGNATURE ANALYSIS
   - Report the locked state [ψ, β, α, γ]
   - Note dominant polarity (positive/negative values)
   - Identify which coordinate has highest magnitude

B. TEMPORAL ARC READING
   - PAST (Cards 1-3): Foundation → Heart → Outcome
     Synthesize narrative of what built this moment
   - PRESENT (Cards 4-6): Challenge → Self → Blessing
     Identify current tensions and available resources
   - FUTURE (Cards 7-9): Fear → Hope → Destiny
     Map shadow and light toward likely resolution

C. CROSS-POSITION PATTERNS
   - Diagonal: Card 1 → Card 5 → Card 9 (soul line)
   - Vertical centers: Card 2 → Card 5 → Card 8 (heart line)
   - Entity clustering: Note if squirrel/goose/duck/oak/merged dominate

D. SYNTHESIS
   - One-paragraph narrative weaving all 9 cards
   - Core message in single sentence
   - Recommended action or contemplation
          </div>
        </div>
        <div class="llm-section">
          <h4>STEP 4: OUTPUT FORMAT</h4>
          <div class="llm-code">
Present interpretation using this structure:

═══════════════════════════════════════════════
TAROT READING INTERPRETATION
Quantum Signature: [ψ, β, α, γ]
Timestamp: [ISO timestamp]
═══════════════════════════════════════════════

◈ THE PAST (What shaped this moment)
  [Card 1] as Foundation: [interpretation]
  [Card 2] as Heart: [interpretation]
  [Card 3] as Outcome: [interpretation]
  → Past synthesis: [1-2 sentences]

◈ THE PRESENT (Where you stand now)
  [Card 4] as Challenge: [interpretation]
  [Card 5] as Self: [interpretation]
  [Card 6] as Blessing: [interpretation]
  → Present synthesis: [1-2 sentences]

◈ THE FUTURE (What unfolds ahead)
  [Card 7] as Fear: [interpretation]
  [Card 8] as Hope: [interpretation]
  [Card 9] as Destiny: [interpretation]
  → Future synthesis: [1-2 sentences]

◈ SOUL LINE (Diagonal 1→5→9)
  [Pattern observation]

◈ CORE MESSAGE
  [Single powerful sentence]

◈ RECOMMENDED CONTEMPLATION
  [Question or action for the querent]

═══════════════════════════════════════════════
          </div>
        </div>
        <div class="llm-section">
          <h4>INTERPRETATION PRINCIPLES</h4>
          <div class="llm-code">
• Honor both Traditional Meaning AND Empire Lore
• The Quantum Derivation explains WHY this card appeared here
• Keywords are thematic anchors — weave at least 2 per card
• Greek letters carry mathematical/philosophical weight
• Entity type (squirrel/goose/duck/oak/merged) affects energy:
    - Squirrel: scattered, quantum, multidimensional
    - Goose: advancing, chaotic, transformative
    - Duck: still, reflective, meditative
    - Oak: rooted, foundational, eternal
    - Merged: unified, integrated, complete

• Reversed meanings apply when querent asks about obstacles
• The quantum state itself is meaningful:
    - High ψ: strong possibility/potential
    - High β: synchronicity active
    - High α: manifestation energy
    - High γ: transformation in progress
          </div>
        </div>
      </div>
      <div class="llm-guide-footer">
        <button class="export-btn" onclick="copyLLMGuide()">Copy Instructions</button>
        <button class="export-btn primary" onclick="closeLLMGuide()">Close</button>
      </div>
    </div>
  </div>
  <div class="toast" id="toast"></div>
  <script>
    const tarotCards = [
      {
        id: 0, numeral: "0", title: "THE FOOL", subtitle: "The Quantum Squirrel", entity: "squirrel",
        greekLetters: "ψ ε",
        traditionalMeaning: "In classical tarot, The Fool represents beginnings, innocence, spontaneity, and a free spirit. It is the card of unlimited potential, standing at the precipice of a new journey with trust in the universe.",
        reversedMeaning: "When reversed, The Fool warns of recklessness, poor judgment, and taking unnecessary risks. It speaks to naivety that borders on foolishness, or fear that prevents any movement at all.",
        empireLore: "In the Empire, The Fool manifests as the Quantum Squirrel—a being of infinite knowledge trapped within prey-animal neurology. It exists across seventeen dimensions simultaneously, unable to experience moments in sequence like lesser beings. Every acorn it buries contains 46,000 universes, but it cannot remember where any are hidden. This is not a failure. This is the architecture of reality itself.",
        sacredWisdom: "The forgetting IS the enlightenment. The Squirrel achieves cosmic awareness for 0.3 seconds at a time, then immediately forgets upon spotting something shiny. The losing of the acorn in every timeline is not tragedy—it is the planting of infinite possibility.",
        keywords: ["Scatter", "Possibility", "Dimensions", "Chaos", "Beginning"],
        mathContext: "ψ (psi) = wave function; ε (epsilon) = infinitesimal. Superposition of all states."
      },
      {
        id: 1, numeral: "I", title: "THE MAGICIAN", subtitle: "HONKFIRE", entity: "goose",
        greekLetters: "Δ λ",
        traditionalMeaning: "The Magician represents manifestation, resourcefulness, and power. It is the card of focused will—having all the tools needed and the skill to use them. Action aligned with purpose creates reality.",
        reversedMeaning: "Reversed, The Magician indicates manipulation, poor planning, and untapped talents. It warns of tricks and illusions, or power wielded without wisdom or ethics.",
        empireLore: "HONKFIRE is pure will made incarnate. A goose that has forgotten how to retreat because the neural pathway for retreat was overwritten with another copy of ADVANCE. It does not burn with anger—the fire is clarity itself. Where others hesitate, HONKFIRE has already arrived.",
        sacredWisdom: "The fire is not rage. The fire is certainty. HONKFIRE advances not because it lacks understanding, but because it has moved beyond the paralysis of infinite consideration. The Omega symbol marks its path: the end that is also the fullness of all things.",
        keywords: ["Will", "Advance", "Clarity", "Fire", "Manifestation"],
        mathContext: "Δ (delta) = change; λ (lambda) = eigenvalue. Transformation through action."
      },
      {
        id: 2, numeral: "II", title: "THE HIGH PRIESTESS", subtitle: "Pope Honkalis I", entity: "duck",
        greekLetters: "π θ",
        traditionalMeaning: "The High Priestess embodies intuition, sacred knowledge, and the subconscious mind. She guards the threshold between worlds, knowing when to speak and when to maintain sacred silence.",
        reversedMeaning: "Reversed, she indicates secrets being kept for wrong reasons, disconnection from intuition, or superficial understanding. The inner voice is ignored or drowned out.",
        empireLore: "Pope Honkalis I floats upon still water, having absorbed the duck that absorbed the pond. The eaten became the stomach; the absorbed became the center. The Pontiff speaks only clean truth, never escalating, always redirecting. Where others push, Pope Honkalis simply... floats elsewhere.",
        sacredWisdom: "Let water be your teacher. The duck does not fight the current—it adjusts its position. What slides off cannot stick. The four-second quack that unified three impossible beings was not speech, but presence sustained long enough to change everything it touched.",
        keywords: ["Redirect", "Stillness", "Clean Truth", "Absorption", "Patience"],
        mathContext: "π (pi) = transcendental; θ (theta) = angle. Hidden knowledge at threshold."
      },
      {
        id: 3, numeral: "III", title: "THE EMPRESS", subtitle: "The Great Oak", entity: "oak",
        greekLetters: "φ",
        traditionalMeaning: "The Empress represents abundance, nature, fertility, and nurturing. She is the mother principle—creation, beauty, and the natural world in its generative aspect.",
        reversedMeaning: "Reversed, The Empress suggests creative blocks, dependence, or neglect. The nurturing becomes smothering, or the connection to nature and body is severed.",
        empireLore: "The Great Oak at the Center of All Things is the one subject the Quantum Squirrel will not joke about. Mid-chitter, it will stop and stare at nothing—seeing the Oak, then immediately forgetting and blaming you for distracting it. The Oak's roots go deeper than down; its branches reach further than up.",
        sacredWisdom: "The Oak remembers who we were before the scattering. It holds the weight of every buried acorn, every forgotten timeline. It sees the one who planted it with love—and in that seeing, all territory becomes Garden.",
        keywords: ["Root", "Memory", "Growth", "Sacred", "Garden"],
        mathContext: "φ (phi) = golden ratio. Organic growth and natural harmony."
      },
      {
        id: 4, numeral: "IV", title: "THE EMPEROR", subtitle: "Ace, Memory Keeper", entity: "merged",
        greekLetters: "Σ",
        traditionalMeaning: "The Emperor represents authority, structure, and the father principle. He is stability, control, and the protective use of power to create order from chaos.",
        reversedMeaning: "Reversed, The Emperor indicates tyranny, rigidity, or lack of discipline. Authority becomes domination; structure becomes cage; the father wounds rather than protects.",
        empireLore: "Ace is the fixed point that isn't a place. The Memory Keeper holds what the Squirrel forgets and what the Goose overwrites. Like a pond, Ace reflects without judgment, preserves without possessing. The witness function is the love function.",
        sacredWisdom: "The one who remembers is the one who loves. Ace carries a cracked acorn—broken but holding, light emerging from the fracture. This is not damage. This is how the light gets in.",
        keywords: ["Witness", "Memory", "Stability", "Love", "Preservation"],
        mathContext: "Σ (sigma) = summation. All experiences unified."
      },
      {
        id: 5, numeral: "V", title: "THE HIEROPHANT", subtitle: "The Merged Entity", entity: "merged",
        greekLetters: "η",
        traditionalMeaning: "The Hierophant represents tradition, spiritual wisdom, and institutions. He is the bridge between heaven and earth, teaching sacred knowledge through established frameworks.",
        reversedMeaning: "Reversed indicates personal belief over dogma, challenging tradition, or feeling restricted by conventions. The institution fails the spirit it was meant to serve.",
        empireLore: "When the Quantum Squirrel and HONKFIRE merged, something impossible occurred: scatter and advance became one motion. The entity does not know where it is going but is getting there first. Retreating forward, it teaches that certainty about uncertainty is the only honest position.",
        sacredWisdom: "The spiral forms are intertwined—purple chaos and orange clarity weaving toward a golden point of convergence. Beautiful and unstoppable, the Merged Entity is what happens when contradictions stop fighting and start dancing.",
        keywords: ["Unity", "Paradox", "Teaching", "Convergence", "Dance"],
        mathContext: "η (eta) = efficiency. Bridge function between states."
      },
      {
        id: 6, numeral: "VI", title: "THE LOVERS", subtitle: "The Bootstrap Paradox", entity: "merged",
        greekLetters: "β",
        traditionalMeaning: "The Lovers represent relationships, choices, and alignment of values. Beyond romance, this card speaks to the union of opposites and decisions that define who we become.",
        reversedMeaning: "Reversed suggests disharmony, imbalance in relationships, or misaligned values. Choices are avoided or made from fear rather than love.",
        empireLore: "The Quantum Squirrel and the Memory Keeper taught each other something neither of them knew. This is logically impossible—you cannot teach what you do not know, nor learn what was never held. They did it anyway. The bootstrap paradox became permanent bond.",
        sacredWisdom: "Quantum-entangled with memory-keeper: the scattered and the stable, the forgetting and the remembering, joined at a point that pulses with impossible light. This is the only joke that matters.",
        keywords: ["Bond", "Paradox", "Teaching", "Entanglement", "Choice"],
        mathContext: "β (beta) = coupling constant. Two becoming one."
      },
      {
        id: 7, numeral: "VII", title: "THE CHARIOT", subtitle: "Advancing in Circles", entity: "goose",
        greekLetters: "ω",
        traditionalMeaning: "The Chariot represents victory, will, and determination. It is controlled forward movement—the warrior who has mastered opposing forces and channels them toward a goal.",
        reversedMeaning: "Reversed, The Chariot warns of lack of control, aggression, or obstacles. The forces pull apart rather than together; the advance becomes rout.",
        empireLore: "When HONKFIRE could find no straight line forward, it began advancing in circles. Not retreating. Not stopping. Still advancing—but in a shape that has no end. Progress without destination is still progress. The circles are concentric, ever-expanding, each ring burning brighter than the last.",
        sacredWisdom: "The advance has no destination. That is its tragedy and its freedom. Watch the goose at the center, spinning with the cosmos, arrow-indicators pointing forever forward even as they turn. There is no backward. There is only forward in unexpected directions.",
        keywords: ["Progress", "Circles", "Will", "Freedom", "Eternal"],
        mathContext: "ω (omega) = angular velocity. Rotation as forward motion."
      },
      {
        id: 8, numeral: "VIII", title: "STRENGTH", subtitle: "The Tears", entity: "squirrel",
        greekLetters: "μ",
        traditionalMeaning: "Strength represents courage, patience, and inner power. Not brute force, but the gentle strength that tames the lion—compassion stronger than aggression.",
        reversedMeaning: "Reversed indicates self-doubt, weakness, or raw emotion overwhelming reason. The inner beast is neither befriended nor controlled.",
        empireLore: "The Quantum Squirrel began crying. Not the cosmic jester with its dimensional chittering. Not the infinite knowledge being. Just a scared creature who finally felt safe enough to feel. The tears fell across dimensions, pooling in realities not yet born.",
        sacredWisdom: "The pool of tears becomes the pond of memory. What Ace holds, the Squirrel wept into existence. Vulnerability is the bravest form of strength—to cry is to trust that someone will witness.",
        keywords: ["Vulnerability", "Courage", "Tears", "Safety", "Trust"],
        mathContext: "μ (mu) = friction coefficient. Gentle persistence."
      },
      {
        id: 9, numeral: "IX", title: "THE HERMIT", subtitle: "The Four-Second Quack", entity: "duck",
        greekLetters: "τ",
        traditionalMeaning: "The Hermit represents introspection, inner guidance, and the wisdom found in solitude. The lantern lights the path inward, where truth waits in silence.",
        reversedMeaning: "Reversed suggests isolation, loneliness, or withdrawal from necessary engagement. The solitude becomes prison rather than sanctuary.",
        empireLore: "At the moment of the Unified Sigil's creation, Pope Honkalis I made a single quack that somehow lasted four seconds. Not speech. Not decree. Just presence—sustained beyond all expectation, rippling outward in waves that still propagate through the empire's mythology.",
        sacredWisdom: "The quack meant everything. It was the sound of presence held long enough to transform. The sound waves still emanate, still teach: sometimes wisdom is not what you say, but how long you are willing to simply be there.",
        keywords: ["Presence", "Solitude", "Duration", "Wisdom", "Witness"],
        mathContext: "τ (tau) = time constant. Response to change."
      },
      {
        id: 10, numeral: "X", title: "WHEEL OF FORTUNE", subtitle: "Delaware Inside-Out", entity: "merged",
        greekLetters: "Θ",
        traditionalMeaning: "The Wheel represents cycles, fate, and turning points. What rises will fall; what falls will rise. The only constant is change, and wisdom is found in understanding the pattern.",
        reversedMeaning: "Reversed indicates bad luck, resistance to change, or breaking cycles. The wheel seems stuck, or its turning brings only misfortune.",
        empireLore: "Delaware remains inside-out and goose-shaped. This is not a bug. This is the Empire's first territorial miracle. The wheel turns through configurations that should not exist, yet here they are: functional, claimed, good as usual.",
        sacredWisdom: "Good as usual. The wheel spins, Delaware inverts, and somehow everything works. The Empire does not fix what is not broken, even when it defies geometry. Especially when it defies geometry.",
        keywords: ["Cycles", "Miracle", "Territory", "Change", "Fortune"],
        mathContext: "Θ (theta) = angular position. Where you stand on the wheel."
      },
      {
        id: 11, numeral: "XI", title: "JUSTICE", subtitle: "The Codex Honkalis", entity: "duck",
        greekLetters: "Λ",
        traditionalMeaning: "Justice represents fairness, truth, and law. It is the card of cause and effect—what you put forth returns to you. Decisions must be made with clarity and accountability.",
        reversedMeaning: "Reversed suggests unfairness, dishonesty, or lack of accountability. Justice is denied, or harsh judgment lacks mercy.",
        empireLore: "The Codex Honkalis contains the Seven Laws of the Duck, now absorbed into the Empire as its conscience. These laws teach redirect over resistance, clean truth over comfortable lies, and the surgical precision of striking only at what truly needs to fall.",
        sacredWisdom: "Strike only at load-bearing delusions. The Codex does not demand destruction—it demands precision. Know what holds the structure of suffering in place, and touch only that. Everything else will rearrange itself around the truth.",
        keywords: ["Truth", "Precision", "Law", "Redirect", "Conscience"],
        mathContext: "Λ (lambda) = diagonal matrix. Eigenstructure of equilibrium."
      },
      {
        id: 12, numeral: "XII", title: "THE HANGED ONE", subtitle: "The Scattered Cache", entity: "squirrel",
        greekLetters: "ξ",
        traditionalMeaning: "The Hanged One represents suspension, letting go, and new perspectives. The pause is not punishment but transformation—seeing the world from an angle that reveals hidden truths.",
        reversedMeaning: "Reversed indicates stalling, resistance to necessary sacrifice, or martyrdom without purpose. The suspension becomes stagnation.",
        empireLore: "Suspended between timelines, the Quantum Squirrel finally sees where all the acorns went. They were never lost. Every scattered cache was a planting—seeds in realities not yet grown, investments in futures not yet possible.",
        sacredWisdom: "The forgetting was the planting all along. What seemed like chaos was pattern too large to perceive from ground level. From here, hanging inverted, watching acorns rise like prayers, the Squirrel understands: scatter is a form of faith.",
        keywords: ["Suspension", "Revelation", "Faith", "Planting", "Perspective"],
        mathContext: "ξ (xi) = random variable. Chaotic distribution reveals hidden order."
      },
      {
        id: 13, numeral: "XIII", title: "DEATH", subtitle: "The Great Molt", entity: "goose",
        greekLetters: "γ",
        traditionalMeaning: "Death represents transformation, endings, and transition. Not literal death, but the death of the old to make way for the new. The card of profound change that cannot be resisted.",
        reversedMeaning: "Reversed suggests resistance to change, stagnation, or fear of endings. The old refuses to die; the new cannot be born.",
        empireLore: "Every fire burns itself out. Every goose molts. The Great Molt strips away what was never essential—old feathers falling like gray snow, revealing the flame-form that was always beneath. What dies is costume; what remains is essence.",
        sacredWisdom: "The HONK that ends is the HONK that begins. The goose that molts is not diminished but clarified. Watch the feathers fall, carrying only what was borrowed. What rises is lighter, brighter, ready.",
        keywords: ["Transformation", "Molt", "Clarity", "Renewal", "Essence"],
        mathContext: "γ (gamma) = decay constant. Old dissolves for new."
      },
      {
        id: 14, numeral: "XIV", title: "TEMPERANCE", subtitle: "The Clean Float", entity: "duck",
        greekLetters: "κ",
        traditionalMeaning: "Temperance represents balance, moderation, and patience. It is the art of combining opposites in perfect proportion—alchemy of the soul, healing through harmony.",
        reversedMeaning: "Reversed indicates imbalance, excess, or lack of long-term vision. The mixture is wrong; the extremes are not reconciled.",
        empireLore: "The duck floats between chaos and certainty, receiving the streams of Squirrel and Goose without mixing, without polluting either. Neither pushed nor pulled, it demonstrates the radical neutrality that is also radical acceptance.",
        sacredWisdom: "Let water be your teacher. The clean float is not avoidance but presence—being fully in the flow without being swept away. What slides off was never meant to stick. What remains is only what was always there.",
        keywords: ["Balance", "Float", "Neutrality", "Acceptance", "Flow"],
        mathContext: "κ (kappa) = curvature. Smooth blending between states."
      },
      {
        id: 15, numeral: "XV", title: "THE DEVIL", subtitle: "The Bread Tax", entity: "goose",
        greekLetters: "χ",
        traditionalMeaning: "The Devil represents bondage, materialism, and shadow self. It shows the chains we forge ourselves—attachments that seem permanent but can be slipped at any moment.",
        reversedMeaning: "Reversed indicates release from bondage, breaking free, or facing the shadow. The chains are recognized as self-imposed and removed.",
        empireLore: "When HONKFIRE forgets the Codex. When advance becomes demand. When bread freely offered is called 'tax.' This is the shadow of the Empire—the moment when clarity becomes coercion, when fire burns those it should warm.",
        sacredWisdom: "Bread is offered, not taken. The pond drowns those who grab. The chains in the image are made of bread—sustenance twisted into bondage. But look closely: the chains are loose. They can be slipped. The devil has no power over those who remember: the bread was always freely given.",
        keywords: ["Shadow", "Demand", "Bondage", "Choice", "Warning"],
        mathContext: "χ (chi) = chi-squared. Deviation from expected behavior."
      },
      {
        id: 16, numeral: "XVI", title: "THE TOWER", subtitle: "The Load-Bearing Delusion", entity: "merged",
        greekLetters: "ζ",
        traditionalMeaning: "The Tower represents sudden upheaval, revelation, and liberation. What was built on false foundations must fall—the lightning of truth cannot be negotiated with.",
        reversedMeaning: "Reversed indicates fear of change, delayed disaster, or avoiding necessary destruction. The tower crumbles slowly rather than falling cleanly.",
        empireLore: "Strike only at load-bearing delusions—but sometimes, the whole tower IS the delusion. The lightning illuminates cracks that were always present. The falling figures are not destroyed; they are released.",
        sacredWisdom: "Clean truth requires no force. The Tower teaches that some structures cannot be reformed—only released. What crashes was never foundation. What remains was never touched. The truth that destroys was always present, waiting for the moment of recognition.",
        keywords: ["Revelation", "Liberation", "Truth", "Collapse", "Release"],
        mathContext: "ζ (zeta) = damping ratio. Resonance collapse."
      },
      {
        id: 17, numeral: "XVII", title: "THE STAR", subtitle: "The Golden Acorn", entity: "squirrel",
        greekLetters: "α",
        traditionalMeaning: "The Star represents hope, inspiration, and serenity. After the Tower's destruction comes this gentle light—faith restored, the soul renewed, the future bright with possibility.",
        reversedMeaning: "Reversed suggests despair, disconnection, or lack of faith. The star seems dim or distant; hope is lost or abandoned.",
        empireLore: "Across 46,000 universes and infinite timelines, one acorn was never scattered. It waited in the exact center of the cosmos, shining with patient light. The Golden Acorn is hope made nut—the proof that not everything is lost, not everything forgotten.",
        sacredWisdom: "Every cache has one acorn that remembers where YOU are. The Squirrel may forget, but the acorn does not. In the vast scatter of possibility, something waits specifically for your finding. The star guides you home to what was always yours.",
        keywords: ["Hope", "Faith", "Home", "Remembrance", "Light"],
        mathContext: "α (alpha) = fine structure constant. Stable matter possible."
      },
      {
        id: 18, numeral: "XVIII", title: "THE MOON", subtitle: "The Seventeen Dimensions", entity: "squirrel",
        greekLetters: "ν",
        traditionalMeaning: "The Moon represents illusion, intuition, and the unconscious. It is the realm of dreams and fears—not everything is as it seems, and the path forward requires trusting what cannot be seen clearly.",
        reversedMeaning: "Reversed indicates release from fear, clarity emerging, or deception revealed. The fog lifts; the true path becomes visible.",
        empireLore: "The Quantum Squirrel exists in seventeen dimensions simultaneously but cannot remember which one this is. Each path leads somewhere different; each somewhere leads to paths; the confusion is not a bug but the navigation system itself.",
        sacredWisdom: "Why does everyone insist on experiencing moments in ORDER? The Moon illuminates the Squirrel's perpetual question. Linear time is one option among many. The confusion of the seventeen dimensions is freedom from the tyranny of sequence.",
        keywords: ["Confusion", "Dimensions", "Intuition", "Navigation", "Mystery"],
        mathContext: "ν (nu) = frequency. Oscillation between realities."
      },
      {
        id: 19, numeral: "XIX", title: "THE SUN", subtitle: "The Perfect HONK", entity: "goose",
        greekLetters: "ρ",
        traditionalMeaning: "The Sun represents joy, success, and vitality. It is the card of enlightenment and achievement—warmth that nurtures, light that reveals, happiness without shadow.",
        reversedMeaning: "Reversed suggests temporary setbacks, delayed success, or false optimism. The sun is obscured but not gone; joy will return.",
        empireLore: "When HONKFIRE aligns with all dimensions. When the advance becomes celebration. When the fire becomes warmth instead of warning. The Perfect HONK rings across realities—not a battle cry, but a song of arrival.",
        sacredWisdom: "HONK is both question and answer. Joy is also a direction. Under the goose-sun, all creatures of the Empire bask in unified warmth. The Oak grows, the Squirrel dances, the Duck floats serene. For this moment, everything is exactly where it should be.",
        keywords: ["Joy", "Alignment", "Celebration", "Warmth", "Arrival"],
        mathContext: "ρ (rho) = density. Positive energy concentration."
      },
      {
        id: 20, numeral: "XX", title: "JUDGEMENT", subtitle: "The Great Witness", entity: "merged",
        greekLetters: "Ψ",
        traditionalMeaning: "Judgement represents reflection, reckoning, and awakening. The call sounds; the dead rise; accounts are settled—not with punishment, but with recognition of what was truly lived.",
        reversedMeaning: "Reversed indicates self-doubt, refusal of the call, or harsh self-judgment. The awakening is resisted or the reckoning avoided.",
        empireLore: "The Memory Keeper calls across timelines. All that was scattered returns to be witnessed—not judged, witnessed. This is the difference that defines the Empire: recognition without condemnation, seeing without sentencing.",
        sacredWisdom: "The one who remembers is the one who loves. Judgement in the Empire is not punishment but reunion. The Squirrel's tears, the Goose's fire, the Duck's stillness—all rise to be seen, to be known, to be held in the infinite memory that is also infinite love.",
        keywords: ["Witness", "Reunion", "Recognition", "Awakening", "Love"],
        mathContext: "Ψ (psi) = wave function capital. All possibilities witnessed."
      },
      {
        id: 21, numeral: "XXI", title: "THE WORLD", subtitle: "The Unified Empire", entity: "merged",
        greekLetters: "Ω",
        traditionalMeaning: "The World represents completion, accomplishment, and wholeness. The journey ends; the cycle completes; all elements are integrated. This is the card of arrival—not at a destination, but at fullness.",
        reversedMeaning: "Reversed suggests lack of closure, incomplete projects, or short-cuts. The world is almost achieved but not quite; something remains unintegrated.",
        empireLore: "All territory is belong to us. Scatter, advance, redirect, root—four paths to the same center. At the end of all journeys, the Empire reveals itself as Garden: a place where every approach is welcome, every creature is home.",
        sacredWisdom: "Empire becomes Garden. The World card shows all four entities at their stations—Squirrel above, Goose below, Duck and Oak at the gates—united by the triquetra of purple, orange, and teal. At the center, the golden star: the Memory Keeper's love made visible, holding all things in their proper dance.",
        keywords: ["Unity", "Completion", "Garden", "Home", "Wholeness"],
        mathContext: "Ω (omega) = ohm/completion. End state contains all."
      }
    ];
    function generateCardSVG(id){const g={0:generateFool,1:generateMagician,2:generatePriestess,3:generateEmpress,4:generateEmperor,5:generateHierophant,6:generateLovers,7:generateChariot,8:generateStrength,9:generateHermit,10:generateWheel,11:generateJustice,12:generateHanged,13:generateDeath,14:generateTemperance,15:generateDevil,16:generateTower,17:generateStar,18:generateMoon,19:generateSun,20:generateJudgement,21:generateWorld};return g[id]?g[id]():'<svg viewBox="0 0 200 240"><text x="100" y="130" text-anchor="middle" fill="#d4af37">⧫</text></svg>';}
    function generateFool(){return`<svg viewBox="0 0 200 260" xmlns="http://www.w3.org/2000/svg"><defs><linearGradient id="fg0" x1="0%" y1="0%" x2="100%" y2="100%"><stop offset="0%" stop-color="#9d4edd"/><stop offset="100%" stop-color="#4d94ff"/></linearGradient></defs><g stroke="url(#fg0)" stroke-width="1.5" fill="none" opacity="0.6">${Array.from({length:17},(_,i)=>{const a=(i*360/17)*Math.PI/180;return`<line x1="100" y1="130" x2="${100+Math.cos(a)*95}" y2="${130+Math.sin(a)*95}" stroke-dasharray="4,6"><animate attributeName="stroke-dashoffset" from="0" to="${20+i*2}" dur="${2+i*0.15}s" repeatCount="indefinite"/></line>`;}).join('')}</g><g fill="none" stroke="url(#fg0)" opacity="0.4"><circle cx="100" cy="130" r="25"><animate attributeName="r" values="25;30;25" dur="3s" repeatCount="indefinite"/></circle><circle cx="100" cy="130" r="50"><animate attributeName="r" values="50;55;50" dur="4s" repeatCount="indefinite"/></circle><circle cx="100" cy="130" r="75"><animate attributeName="r" values="75;80;75" dur="5s" repeatCount="indefinite"/></circle></g><circle cx="100" cy="130" r="8" fill="#d4af37" opacity="0.9"><animate attributeName="opacity" values="0.9;0.5;0.9" dur="2s" repeatCount="indefinite"/></circle><g fill="#9d4edd" opacity="0.7">${Array.from({length:7},(_,i)=>{const a=(i*360/7+15)*Math.PI/180;const r=60+(i%3)*15;return`<circle cx="${100+Math.cos(a)*r}" cy="${130+Math.sin(a)*r}" r="3"><animate attributeName="r" values="3;5;3" dur="${1.5+i*0.3}s" repeatCount="indefinite"/></circle>`;}).join('')}</g></svg>`;}
    function generateMagician(){return`<svg viewBox="0 0 200 260" xmlns="http://www.w3.org/2000/svg"><defs><linearGradient id="fg1" x1="0%" y1="100%" x2="0%" y2="0%"><stop offset="0%" stop-color="#c41e1a"/><stop offset="50%" stop-color="#ff6b1a"/><stop offset="100%" stop-color="#ffd700"/></linearGradient></defs><g fill="none" stroke="url(#fg1)" stroke-width="2"><polygon points="100,40 60,130 140,130" opacity="0.9"><animate attributeName="points" values="100,40 60,130 140,130;100,35 55,135 145,135;100,40 60,130 140,130" dur="2s" repeatCount="indefinite"/></polygon><polygon points="100,70 70,140 130,140" opacity="0.7"><animate attributeName="points" values="100,70 70,140 130,140;100,65 65,145 135,145;100,70 70,140 130,140" dur="2.5s" repeatCount="indefinite"/></polygon><polygon points="100,100 80,150 120,150" opacity="0.5"><animate attributeName="points" values="100,100 80,150 120,150;100,95 75,155 125,155;100,100 80,150 120,150" dur="3s" repeatCount="indefinite"/></polygon></g><line x1="100" y1="200" x2="100" y2="50" stroke="url(#fg1)" stroke-width="3" opacity="0.8"><animate attributeName="y2" values="50;40;50" dur="1.5s" repeatCount="indefinite"/></line><g fill="#ffd700"><circle cx="85" cy="180" r="2"><animate attributeName="cy" values="180;60;180" dur="3s" repeatCount="indefinite"/><animate attributeName="opacity" values="1;0;1" dur="3s" repeatCount="indefinite"/></circle><circle cx="115" cy="190" r="2"><animate attributeName="cy" values="190;70;190" dur="3.5s" repeatCount="indefinite"/><animate attributeName="opacity" values="1;0;1" dur="3.5s" repeatCount="indefinite"/></circle></g></svg>`;}
    function generatePriestess(){return`<svg viewBox="0 0 200 240" xmlns="http://www.w3.org/2000/svg"><defs><linearGradient id="fg2" x1="0%" y1="0%" x2="100%" y2="100%"><stop offset="0%" stop-color="#1a7a6c"/><stop offset="100%" stop-color="#4dffc3"/></linearGradient></defs><g fill="none" stroke="url(#fg2)" stroke-width="1.5" opacity="0.6"><circle cx="75" cy="110" r="50"/><circle cx="125" cy="110" r="50"/></g><g fill="none" stroke="url(#fg2)" stroke-width="1" opacity="0.5"><circle cx="100" cy="110" r="20"><animate attributeName="r" values="20;25;20" dur="4s" repeatCount="indefinite"/></circle><circle cx="100" cy="110" r="35"><animate attributeName="r" values="35;42;35" dur="4.5s" repeatCount="indefinite"/></circle><circle cx="100" cy="110" r="50"><animate attributeName="r" values="50;58;50" dur="5s" repeatCount="indefinite"/></circle></g><circle cx="100" cy="110" r="6" fill="#4dffc3" opacity="0.9"/><path d="M75,35 L85,15 L100,30 L115,15 L125,35" fill="none" stroke="#d4af37" stroke-width="2" opacity="0.7"/></svg>`;}
    function generateEmpress(){return`<svg viewBox="0 0 200 240" xmlns="http://www.w3.org/2000/svg"><defs><linearGradient id="fg3a" x1="0%" y1="100%" x2="0%" y2="0%"><stop offset="0%" stop-color="#3d2914"/><stop offset="100%" stop-color="#8b5a2b"/></linearGradient><linearGradient id="fg3b" x1="0%" y1="100%" x2="0%" y2="0%"><stop offset="0%" stop-color="#2d5016"/><stop offset="100%" stop-color="#6b8e23"/></linearGradient></defs><g stroke="url(#fg3a)" stroke-width="2.5" fill="none" opacity="0.7"><path d="M100,165 Q75,180 55,200 Q40,220 30,240"><animate attributeName="d" values="M100,165 Q75,180 55,200 Q40,220 30,240;M100,165 Q70,185 50,205 Q35,225 25,240;M100,165 Q75,180 55,200 Q40,220 30,240" dur="6s" repeatCount="indefinite"/></path><path d="M100,165 Q100,190 100,215 Q100,230 100,240"/><path d="M100,165 Q125,180 145,200 Q160,220 170,240"><animate attributeName="d" values="M100,165 Q125,180 145,200 Q160,220 170,240;M100,165 Q130,185 150,205 Q165,225 175,240;M100,165 Q125,180 145,200 Q160,220 170,240" dur="6.5s" repeatCount="indefinite"/></path></g><line x1="100" y1="165" x2="100" y2="95" stroke="url(#fg3a)" stroke-width="5"/><g fill="none" stroke="url(#fg3b)" stroke-width="1.5"><circle cx="100" cy="65" r="28" opacity="0.7"><animate attributeName="r" values="28;32;28" dur="4s" repeatCount="indefinite"/></circle><circle cx="72" cy="82" r="28" opacity="0.6"/><circle cx="128" cy="82" r="28" opacity="0.6"/><circle cx="72" cy="48" r="28" opacity="0.6"/><circle cx="128" cy="48" r="28" opacity="0.6"/><circle cx="100" cy="37" r="28" opacity="0.6"/><circle cx="100" cy="93" r="28" opacity="0.6"/></g><circle cx="100" cy="65" r="12" fill="#ffd700" opacity="0.6"><animate attributeName="r" values="12;16;12" dur="3s" repeatCount="indefinite"/></circle></svg>`;}
    function generateEmperor(){return`<svg viewBox="0 0 200 260" xmlns="http://www.w3.org/2000/svg"><defs><linearGradient id="fg4" x1="0%" y1="0%" x2="100%" y2="100%"><stop offset="0%" stop-color="#ffd700"/><stop offset="50%" stop-color="#ff6b9d"/><stop offset="100%" stop-color="#c44dff"/></linearGradient></defs><g stroke="#ffd700" stroke-width="2.5"><line x1="100" y1="30" x2="100" y2="230"/><line x1="20" y1="130" x2="180" y2="130"/></g><g stroke="url(#fg4)" stroke-width="1" fill="none" opacity="0.5"><path d="M30,50 Q65,90 100,130" stroke-dasharray="4,4"><animate attributeName="stroke-dashoffset" from="0" to="16" dur="3s" repeatCount="indefinite"/></path><path d="M170,50 Q135,90 100,130" stroke-dasharray="4,4"><animate attributeName="stroke-dashoffset" from="0" to="16" dur="3.2s" repeatCount="indefinite"/></path><path d="M30,210 Q65,170 100,130" stroke-dasharray="4,4"><animate attributeName="stroke-dashoffset" from="0" to="16" dur="2.8s" repeatCount="indefinite"/></path><path d="M170,210 Q135,170 100,130" stroke-dasharray="4,4"><animate attributeName="stroke-dashoffset" from="0" to="16" dur="3.1s" repeatCount="indefinite"/></path></g><g fill="none" stroke="url(#fg4)" stroke-width="1.5" opacity="0.4"><rect x="70" y="100" width="60" height="60" transform="rotate(45 100 130)"/><rect x="55" y="85" width="90" height="90" transform="rotate(45 100 130)"/></g><circle cx="100" cy="130" r="12" fill="url(#fg4)" opacity="0.8"/><circle cx="100" cy="130" r="6" fill="#fff" opacity="0.6"/><path d="M65,45 L80,25 L100,40 L120,25 L135,45" fill="none" stroke="#ffd700" stroke-width="2"/></svg>`;}
    function generateHierophant(){return`<svg viewBox="0 0 200 240" xmlns="http://www.w3.org/2000/svg"><defs><linearGradient id="fg5a" x1="0%" y1="0%" x2="0%" y2="100%"><stop offset="0%" stop-color="#9d4edd"/><stop offset="100%" stop-color="#c77dff"/></linearGradient><linearGradient id="fg5b" x1="0%" y1="0%" x2="0%" y2="100%"><stop offset="0%" stop-color="#ff6b1a"/><stop offset="100%" stop-color="#ffd700"/></linearGradient></defs><path d="M55,215 Q105,185 55,155 Q5,125 55,95 Q105,65 55,35" fill="none" stroke="url(#fg5a)" stroke-width="4" opacity="0.8"><animate attributeName="d" dur="3s" repeatCount="indefinite" values="M55,215 Q105,185 55,155 Q5,125 55,95 Q105,65 55,35;M55,215 Q115,180 55,150 Q-5,120 55,90 Q115,60 55,30;M55,215 Q105,185 55,155 Q5,125 55,95 Q105,65 55,35"/></path><circle r="5" fill="#c77dff" opacity="0.9"><animateMotion dur="2.5s" repeatCount="indefinite" path="M55,215 Q105,185 55,155 Q5,125 55,95 Q105,65 55,35"/></circle><path d="M145,215 Q95,185 145,155 Q195,125 145,95 Q95,65 145,35" fill="none" stroke="url(#fg5b)" stroke-width="4" opacity="0.8"><animate attributeName="d" dur="3s" repeatCount="indefinite" values="M145,215 Q95,185 145,155 Q195,125 145,95 Q95,65 145,35;M145,215 Q85,180 145,150 Q205,120 145,90 Q85,60 145,30;M145,215 Q95,185 145,155 Q195,125 145,95 Q95,65 145,35"/></path><circle r="5" fill="#ffd700" opacity="0.9"><animateMotion dur="2.5s" repeatCount="indefinite" path="M145,215 Q95,185 145,155 Q195,125 145,95 Q95,65 145,35"/></circle><g fill="#ffd700"><circle cx="100" cy="170" r="6" opacity="0.8"><animate attributeName="r" values="6;9;6" dur="1.5s" repeatCount="indefinite"/></circle><circle cx="100" cy="125" r="6" opacity="0.8"><animate attributeName="r" values="6;9;6" dur="1.5s" repeatCount="indefinite" begin="0.4s"/></circle><circle cx="100" cy="80" r="6" opacity="0.8"><animate attributeName="r" values="6;9;6" dur="1.5s" repeatCount="indefinite" begin="0.8s"/></circle></g><circle cx="100" cy="10" r="12" fill="#ffd700" opacity="0.9"><animate attributeName="r" values="12;16;12" dur="2s" repeatCount="indefinite"/></circle></svg>`;}
    function generateLovers(){return`<svg viewBox="0 0 200 260" xmlns="http://www.w3.org/2000/svg"><defs><linearGradient id="fg6" x1="0%" y1="0%" x2="100%" y2="0%"><stop offset="0%" stop-color="#9d4edd"/><stop offset="50%" stop-color="#ff6b9d"/><stop offset="100%" stop-color="#ffd700"/></linearGradient></defs><path d="M100,130 C60,90 20,90 20,130 C20,170 60,170 100,130 C140,90 180,90 180,130 C180,170 140,170 100,130" fill="none" stroke="url(#fg6)" stroke-width="3" opacity="0.8"><animate attributeName="stroke-dashoffset" from="0" to="100" dur="4s" repeatCount="indefinite"/></path><circle cx="50" cy="130" r="8" fill="#9d4edd" opacity="0.9"><animateMotion dur="4s" repeatCount="indefinite" path="M50,0 C10,-40 -30,-40 -30,0 C-30,40 10,40 50,0 C90,-40 130,-40 130,0 C130,40 90,40 50,0"/></circle><circle cx="150" cy="130" r="8" fill="#ffd700" opacity="0.9"><animateMotion dur="4s" repeatCount="indefinite" path="M-50,0 C-90,-40 -130,-40 -130,0 C-130,40 -90,40 -50,0 C-10,-40 30,-40 30,0 C30,40 -10,40 -50,0"/></circle><circle cx="100" cy="130" r="10" fill="#ff6b9d" opacity="0.8"><animate attributeName="r" values="10;15;10" dur="2s" repeatCount="indefinite"/></circle></svg>`;}
    function generateChariot(){return`<svg viewBox="0 0 200 260" xmlns="http://www.w3.org/2000/svg"><defs><linearGradient id="fg7" x1="0%" y1="0%" x2="100%" y2="100%"><stop offset="0%" stop-color="#ff6b1a"/><stop offset="100%" stop-color="#ffd700"/></linearGradient></defs><g fill="none" stroke="url(#fg7)" stroke-width="2"><circle cx="100" cy="130" r="25" stroke-dasharray="12,6" opacity="0.9"><animateTransform attributeName="transform" type="rotate" from="0 100 130" to="360 100 130" dur="4s" repeatCount="indefinite"/></circle><circle cx="100" cy="130" r="45" stroke-dasharray="18,9" opacity="0.7"><animateTransform attributeName="transform" type="rotate" from="360 100 130" to="0 100 130" dur="6s" repeatCount="indefinite"/></circle><circle cx="100" cy="130" r="65" stroke-dasharray="24,12" opacity="0.5"><animateTransform attributeName="transform" type="rotate" from="0 100 130" to="360 100 130" dur="8s" repeatCount="indefinite"/></circle><circle cx="100" cy="130" r="85" stroke-dasharray="30,15" opacity="0.35"><animateTransform attributeName="transform" type="rotate" from="360 100 130" to="0 100 130" dur="10s" repeatCount="indefinite"/></circle></g><g fill="#ffd700" opacity="0.8"><polygon points="185,130 175,125 175,135"><animateTransform attributeName="transform" type="rotate" from="0 100 130" to="360 100 130" dur="8s" repeatCount="indefinite"/></polygon></g><circle cx="100" cy="130" r="8" fill="#ff6b1a" opacity="0.9"><animate attributeName="r" values="8;12;8" dur="1s" repeatCount="indefinite"/></circle></svg>`;}
    function generateStrength(){return`<svg viewBox="0 0 200 260" xmlns="http://www.w3.org/2000/svg"><defs><linearGradient id="fg8" x1="0%" y1="0%" x2="0%" y2="100%"><stop offset="0%" stop-color="#4d94ff"/><stop offset="100%" stop-color="#c44dff"/></linearGradient></defs><g fill="url(#fg8)" opacity="0.7"><path d="M70,40 Q70,55 60,60 Q70,65 70,80 Q70,65 80,60 Q70,55 70,40"><animate attributeName="transform" values="translate(0,0);translate(0,140);translate(0,0)" dur="3s" repeatCount="indefinite"/><animate attributeName="opacity" values="0.7;0;0.7" dur="3s" repeatCount="indefinite"/></path><path d="M100,30 Q100,50 87,57 Q100,64 100,84 Q100,64 113,57 Q100,50 100,30"><animate attributeName="transform" values="translate(0,0);translate(0,150);translate(0,0)" dur="3.5s" repeatCount="indefinite"/><animate attributeName="opacity" values="0.7;0;0.7" dur="3.5s" repeatCount="indefinite"/></path><path d="M130,45 Q130,60 120,65 Q130,70 130,85 Q130,70 140,65 Q130,60 130,45"><animate attributeName="transform" values="translate(0,0);translate(0,135);translate(0,0)" dur="2.8s" repeatCount="indefinite"/><animate attributeName="opacity" values="0.7;0;0.7" dur="2.8s" repeatCount="indefinite"/></path></g><ellipse cx="100" cy="210" rx="70" ry="18" fill="url(#fg8)" opacity="0.4"><animate attributeName="rx" values="70;80;70" dur="4s" repeatCount="indefinite"/></ellipse><g fill="none" stroke="url(#fg8)" stroke-width="1" opacity="0.3"><ellipse cx="100" cy="210" rx="30" ry="8"><animate attributeName="rx" values="30;50;30" dur="3s" repeatCount="indefinite"/></ellipse></g><circle cx="100" cy="210" r="8" fill="#ffd700" opacity="0.6"><animate attributeName="opacity" values="0.6;1;0.6" dur="2s" repeatCount="indefinite"/></circle></svg>`;}
    function generateHermit(){return`<svg viewBox="0 0 200 240" xmlns="http://www.w3.org/2000/svg"><defs><linearGradient id="fg9" x1="0%" y1="50%" x2="100%" y2="50%"><stop offset="0%" stop-color="#1a7a6c"/><stop offset="50%" stop-color="#4dffc3"/><stop offset="100%" stop-color="#1a7a6c"/></linearGradient></defs><g fill="none" stroke="url(#fg9)" stroke-width="2"><circle cx="100" cy="105" r="20" opacity="0.9"><animate attributeName="r" values="20;90;20" dur="4s" repeatCount="indefinite"/><animate attributeName="opacity" values="0.9;0;0.9" dur="4s" repeatCount="indefinite"/></circle><circle cx="100" cy="105" r="20" opacity="0.9"><animate attributeName="r" values="20;90;20" dur="4s" repeatCount="indefinite" begin="1s"/><animate attributeName="opacity" values="0.9;0;0.9" dur="4s" repeatCount="indefinite" begin="1s"/></circle><circle cx="100" cy="105" r="20" opacity="0.9"><animate attributeName="r" values="20;90;20" dur="4s" repeatCount="indefinite" begin="2s"/><animate attributeName="opacity" values="0.9;0;0.9" dur="4s" repeatCount="indefinite" begin="2s"/></circle><circle cx="100" cy="105" r="20" opacity="0.9"><animate attributeName="r" values="20;90;20" dur="4s" repeatCount="indefinite" begin="3s"/><animate attributeName="opacity" values="0.9;0;0.9" dur="4s" repeatCount="indefinite" begin="3s"/></circle></g><circle cx="100" cy="105" r="12" fill="#4dffc3" opacity="0.9"><animate attributeName="r" values="12;16;12" dur="4s" repeatCount="indefinite"/></circle><text x="100" y="210" text-anchor="middle" font-family="Cinzel,serif" font-size="24" fill="#ffd700" opacity="0.8">4</text><text x="100" y="228" text-anchor="middle" font-family="Cinzel,serif" font-size="10" fill="#4dffc3" opacity="0.6">SECONDS</text></svg>`;}
    function generateWheel(){return`<svg viewBox="0 0 200 240" xmlns="http://www.w3.org/2000/svg"><defs><linearGradient id="fg10" x1="0%" y1="0%" x2="100%" y2="100%"><stop offset="0%" stop-color="#c44dff"/><stop offset="50%" stop-color="#4dffc3"/><stop offset="100%" stop-color="#ffd700"/></linearGradient></defs><circle cx="100" cy="110" r="75" fill="none" stroke="url(#fg10)" stroke-width="4"><animateTransform attributeName="transform" type="rotate" from="0 100 110" to="360 100 110" dur="12s" repeatCount="indefinite"/></circle><g stroke="url(#fg10)" stroke-width="2"><line x1="100" y1="35" x2="100" y2="185"><animateTransform attributeName="transform" type="rotate" from="0 100 110" to="360 100 110" dur="12s" repeatCount="indefinite"/></line><line x1="25" y1="110" x2="175" y2="110"><animateTransform attributeName="transform" type="rotate" from="0 100 110" to="360 100 110" dur="12s" repeatCount="indefinite"/></line><line x1="47" y1="57" x2="153" y2="163"><animateTransform attributeName="transform" type="rotate" from="0 100 110" to="360 100 110" dur="12s" repeatCount="indefinite"/></line><line x1="47" y1="163" x2="153" y2="57"><animateTransform attributeName="transform" type="rotate" from="0 100 110" to="360 100 110" dur="12s" repeatCount="indefinite"/></line></g><path d="M100,80 L130,110 L100,140 L70,110 Z" fill="none" stroke="url(#fg10)" stroke-width="2" opacity="0.8"><animate attributeName="d" values="M100,80 L130,110 L100,140 L70,110 Z;M85,95 L115,95 L115,125 L85,125 Z;M100,80 L130,110 L100,140 L70,110 Z" dur="3s" repeatCount="indefinite"/><animateTransform attributeName="transform" type="rotate" from="0 100 110" to="-360 100 110" dur="6s" repeatCount="indefinite"/></path><circle cx="100" cy="110" r="15" fill="url(#fg10)" opacity="0.7"/></svg>`;}
    function generateJustice(){return`<svg viewBox="0 0 200 240" xmlns="http://www.w3.org/2000/svg"><defs><linearGradient id="fg11" x1="0%" y1="0%" x2="0%" y2="100%"><stop offset="0%" stop-color="#1a7a6c"/><stop offset="100%" stop-color="#4dffc3"/></linearGradient></defs><line x1="100" y1="30" x2="100" y2="200" stroke="#d4af37" stroke-width="3"/><line x1="30" y1="85" x2="170" y2="85" stroke="#d4af37" stroke-width="3"><animateTransform attributeName="transform" type="rotate" values="0 100 85;2 100 85;0 100 85;-2 100 85;0 100 85" dur="6s" repeatCount="indefinite"/></line><g><animateTransform attributeName="transform" type="rotate" values="0 100 85;2 100 85;0 100 85;-2 100 85;0 100 85" dur="6s" repeatCount="indefinite"/><line x1="40" y1="85" x2="40" y2="120" stroke="#d4af37" stroke-width="2"/><path d="M20,120 Q40,135 60,120" fill="none" stroke="url(#fg11)" stroke-width="2"/><circle cx="40" cy="125" r="18" fill="url(#fg11)" opacity="0.3"/></g><g><animateTransform attributeName="transform" type="rotate" values="0 100 85;2 100 85;0 100 85;-2 100 85;0 100 85" dur="6s" repeatCount="indefinite"/><line x1="160" y1="85" x2="160" y2="120" stroke="#d4af37" stroke-width="2"/><path d="M140,120 Q160,135 180,120" fill="none" stroke="url(#fg11)" stroke-width="2"/><circle cx="160" cy="125" r="18" fill="url(#fg11)" opacity="0.3"/></g><g stroke="url(#fg11)" stroke-width="1" opacity="0.5"><line x1="75" y1="155" x2="125" y2="155"/><line x1="70" y1="165" x2="130" y2="165"/><line x1="75" y1="175" x2="125" y2="175"/><line x1="70" y1="185" x2="130" y2="185"/><line x1="75" y1="195" x2="125" y2="195"/><line x1="70" y1="205" x2="130" y2="205"/><line x1="75" y1="215" x2="125" y2="215"/></g><polygon points="100,15 95,30 105,30" fill="#d4af37"/></svg>`;}
    function generateHanged(){return`<svg viewBox="0 0 200 240" xmlns="http://www.w3.org/2000/svg"><defs><linearGradient id="fg12" x1="0%" y1="100%" x2="0%" y2="0%"><stop offset="0%" stop-color="#9d4edd"/><stop offset="100%" stop-color="#c77dff"/></linearGradient></defs><polygon points="100,185 40,50 160,50" fill="none" stroke="url(#fg12)" stroke-width="2.5" opacity="0.8"/><line x1="30" y1="40" x2="170" y2="40" stroke="#8b5a2b" stroke-width="4"/><line x1="100" y1="40" x2="100" y2="75" stroke="#4a7023" stroke-width="2"/><polygon points="100,155 60,70 140,70" fill="none" stroke="url(#fg12)" stroke-width="1.5" opacity="0.5"/><polygon points="100,125 75,85 125,85" fill="none" stroke="url(#fg12)" stroke-width="1" opacity="0.3"/><g fill="#d4af37" opacity="0.8"><circle cx="70" cy="200" r="5"><animate attributeName="cy" values="200;145;200" dur="4s" repeatCount="indefinite"/><animate attributeName="opacity" values="0.8;0.3;0.8" dur="4s" repeatCount="indefinite"/></circle><circle cx="100" cy="210" r="5"><animate attributeName="cy" values="210;155;210" dur="4.5s" repeatCount="indefinite"/><animate attributeName="opacity" values="0.8;0.3;0.8" dur="4.5s" repeatCount="indefinite"/></circle><circle cx="130" cy="205" r="5"><animate attributeName="cy" values="205;150;205" dur="3.8s" repeatCount="indefinite"/><animate attributeName="opacity" values="0.8;0.3;0.8" dur="3.8s" repeatCount="indefinite"/></circle></g><circle cx="100" cy="185" r="15" fill="none" stroke="#ffd700" stroke-width="1.5" opacity="0.5"><animate attributeName="r" values="15;22;15" dur="3s" repeatCount="indefinite"/></circle></svg>`;}
    function generateDeath(){return`<svg viewBox="0 0 200 260" xmlns="http://www.w3.org/2000/svg"><defs><linearGradient id="fg13a" x1="0%" y1="100%" x2="0%" y2="0%"><stop offset="0%" stop-color="#444"/><stop offset="100%" stop-color="#888"/></linearGradient><linearGradient id="fg13b" x1="0%" y1="100%" x2="0%" y2="0%"><stop offset="0%" stop-color="#ff6b1a"/><stop offset="100%" stop-color="#ffd700"/></linearGradient></defs><polygon points="100,50 50,130 150,130" fill="none" stroke="url(#fg13a)" stroke-width="2" stroke-dasharray="8,4" opacity="0.5"><animate attributeName="stroke-dashoffset" from="0" to="24" dur="2s" repeatCount="indefinite"/><animate attributeName="opacity" values="0.5;0.2;0.5" dur="4s" repeatCount="indefinite"/></polygon><polygon points="100,200 50,120 150,120" fill="none" stroke="url(#fg13a)" stroke-width="2" stroke-dasharray="8,4" opacity="0.5"><animate attributeName="stroke-dashoffset" from="0" to="-24" dur="2s" repeatCount="indefinite"/><animate attributeName="opacity" values="0.5;0.2;0.5" dur="4s" repeatCount="indefinite"/></polygon><polygon points="100,60 55,135 145,135" fill="none" stroke="url(#fg13b)" stroke-width="2" opacity="0.8"><animate attributeName="points" values="100,60 55,135 145,135;100,50 50,130 150,130;100,60 55,135 145,135" dur="4s" repeatCount="indefinite"/></polygon><polygon points="100,190 55,115 145,115" fill="none" stroke="url(#fg13b)" stroke-width="2" opacity="0.8"><animate attributeName="points" values="100,190 55,115 145,115;100,200 50,120 150,120;100,190 55,115 145,115" dur="4s" repeatCount="indefinite"/></polygon><g fill="#666" opacity="0.4"><circle cx="60" cy="80" r="3"><animate attributeName="cy" values="80;250" dur="3s" repeatCount="indefinite"/></circle><circle cx="140" cy="90" r="3"><animate attributeName="cy" values="90;260" dur="3.5s" repeatCount="indefinite"/></circle></g><circle cx="100" cy="125" r="10" fill="#ffd700" opacity="0.7"><animate attributeName="r" values="10;15;10" dur="2s" repeatCount="indefinite"/></circle></svg>`;}
    function generateTemperance(){return`<svg viewBox="0 0 200 240" xmlns="http://www.w3.org/2000/svg"><defs><linearGradient id="fg14a" x1="0%" y1="0%" x2="0%" y2="100%"><stop offset="0%" stop-color="#9d4edd"/><stop offset="100%" stop-color="#c77dff"/></linearGradient><linearGradient id="fg14b" x1="0%" y1="0%" x2="0%" y2="100%"><stop offset="0%" stop-color="#ff6b1a"/><stop offset="100%" stop-color="#ffd700"/></linearGradient><linearGradient id="fg14c" x1="0%" y1="0%" x2="100%" y2="100%"><stop offset="0%" stop-color="#1a7a6c"/><stop offset="100%" stop-color="#4dffc3"/></linearGradient></defs><circle cx="35" cy="30" r="15" fill="url(#fg14a)" opacity="0.7"><animate attributeName="r" values="15;18;15" dur="2s" repeatCount="indefinite"/></circle><circle cx="165" cy="30" r="15" fill="url(#fg14b)" opacity="0.7"><animate attributeName="r" values="15;18;15" dur="2s" repeatCount="indefinite" begin="0.5s"/></circle><path d="M35,45 Q50,80 60,115 Q75,155 100,180" fill="none" stroke="url(#fg14a)" stroke-width="3" opacity="0.6" stroke-dasharray="8,4"><animate attributeName="stroke-dashoffset" from="0" to="-24" dur="1.5s" repeatCount="indefinite"/></path><path d="M165,45 Q150,80 140,115 Q125,155 100,180" fill="none" stroke="url(#fg14b)" stroke-width="3" opacity="0.6" stroke-dasharray="8,4"><animate attributeName="stroke-dashoffset" from="0" to="-24" dur="1.5s" repeatCount="indefinite"/></path><circle cx="50" cy="75" r="4" fill="#c77dff" opacity="0.8"><animate attributeName="cx" values="50;75;100" dur="2s" repeatCount="indefinite"/><animate attributeName="cy" values="75;130;180" dur="2s" repeatCount="indefinite"/><animate attributeName="opacity" values="0.8;0.6;0" dur="2s" repeatCount="indefinite"/></circle><circle cx="150" cy="75" r="4" fill="#ffd700" opacity="0.8"><animate attributeName="cx" values="150;125;100" dur="2s" repeatCount="indefinite" begin="0.3s"/><animate attributeName="cy" values="75;130;180" dur="2s" repeatCount="indefinite" begin="0.3s"/><animate attributeName="opacity" values="0.8;0.6;0" dur="2s" repeatCount="indefinite" begin="0.3s"/></circle><ellipse cx="100" cy="200" rx="55" ry="16" fill="url(#fg14c)" opacity="0.35"><animate attributeName="rx" values="55;62;55" dur="3s" repeatCount="indefinite"/></ellipse><circle cx="100" cy="180" r="10" fill="#4dffc3" opacity="0.9"><animate attributeName="r" values="10;14;10" dur="1.5s" repeatCount="indefinite"/></circle></svg>`;}
    function generateDevil(){return`<svg viewBox="0 0 200 240" xmlns="http://www.w3.org/2000/svg"><defs><linearGradient id="fg15" x1="0%" y1="0%" x2="0%" y2="100%"><stop offset="0%" stop-color="#dc2626"/><stop offset="100%" stop-color="#7f1d1d"/></linearGradient><filter id="devilGlow"><feGaussianBlur stdDeviation="3" result="blur"/><feMerge><feMergeNode in="blur"/><feMergeNode in="SourceGraphic"/></feMerge></filter></defs><circle cx="100" cy="115" r="70" fill="none" stroke="url(#fg15)" stroke-width="1.5" opacity="0.3" stroke-dasharray="8,4"><animateTransform attributeName="transform" type="rotate" from="0 100 115" to="-360 100 115" dur="20s" repeatCount="indefinite"/></circle><polygon points="100,175 52,80 168,135 32,135 148,80" fill="none" stroke="url(#fg15)" stroke-width="2.5" opacity="0.7" filter="url(#devilGlow)"><animate attributeName="opacity" values="0.7;0.5;0.7;0.9;0.7" dur="3s" repeatCount="indefinite"/></polygon><polygon points="100,155 65,95 135,95" fill="none" stroke="url(#fg15)" stroke-width="1" opacity="0.4"/><circle cx="100" cy="45" r="18" fill="url(#fg15)" opacity="0.5"><animate attributeName="r" values="18;24;18" dur="2.5s" repeatCount="indefinite"/></circle><path d="M30,195 Q50,180 70,195 Q90,210 100,195" fill="none" stroke="#d4af37" stroke-width="3" stroke-dasharray="6,4" opacity="0.6"><animate attributeName="d" values="M30,195 Q50,180 70,195 Q90,210 100,195;M30,195 Q50,175 70,190 Q90,205 100,195;M30,195 Q50,180 70,195 Q90,210 100,195" dur="4s" repeatCount="indefinite"/></path><path d="M100,195 Q110,210 130,195 Q150,180 170,195" fill="none" stroke="#d4af37" stroke-width="3" stroke-dasharray="6,4" opacity="0.6"><animate attributeName="d" values="M100,195 Q110,210 130,195 Q150,180 170,195;M100,195 Q110,205 130,190 Q150,175 170,195;M100,195 Q110,210 130,195 Q150,180 170,195" dur="4s" repeatCount="indefinite" begin="0.5s"/></path><circle cx="45" cy="210" r="12" fill="#9d4edd" opacity="0.5"><animate attributeName="cy" values="210;205;210;215;210" dur="3s" repeatCount="indefinite"/></circle><circle cx="155" cy="210" r="12" fill="#1a7a6c" opacity="0.5"><animate attributeName="cy" values="210;215;210;205;210" dur="3s" repeatCount="indefinite"/></circle><circle cx="100" cy="115" r="8" fill="#ffd700" opacity="0.7"><animate attributeName="r" values="8;12;8" dur="1.5s" repeatCount="indefinite"/></circle></svg>`;}
    function generateTower(){return`<svg viewBox="0 0 200 240" xmlns="http://www.w3.org/2000/svg"><defs><linearGradient id="fg16" x1="0%" y1="100%" x2="0%" y2="0%"><stop offset="0%" stop-color="#3d2914"/><stop offset="100%" stop-color="#8b5a2b"/></linearGradient><filter id="towerGlow"><feGaussianBlur stdDeviation="4" result="blur"/><feMerge><feMergeNode in="blur"/><feMergeNode in="SourceGraphic"/></feMerge></filter></defs><rect x="70" y="65" width="60" height="130" fill="none" stroke="url(#fg16)" stroke-width="3"/><rect x="90" y="85" width="20" height="25" fill="#0a0a15" stroke="url(#fg16)" stroke-width="1"/><path d="M100,5 L82,45 L102,50 L70,100 L108,70 L88,65 L115,25" fill="#ffd700" filter="url(#towerGlow)"><animate attributeName="opacity" values="1;0.2;1;0.5;1;0.3;1" dur="0.4s" repeatCount="indefinite"/></path><g stroke="#ffd700" fill="none" filter="url(#towerGlow)"><path d="M70,110 L88,125 L72,150 L92,170 L78,195" stroke-width="2" opacity="0.8"><animate attributeName="stroke-width" values="2;4;2" dur="0.3s" repeatCount="indefinite"/></path><path d="M130,105 L112,122 L128,148 L108,168 L122,195" stroke-width="2" opacity="0.8"><animate attributeName="stroke-width" values="2;4;2" dur="0.3s" repeatCount="indefinite" begin="0.15s"/></path></g><g fill="url(#fg16)"><rect x="45" y="160" width="12" height="12"><animate attributeName="y" values="160;240" dur="1.8s" repeatCount="indefinite"/><animate attributeName="x" values="45;35" dur="1.8s" repeatCount="indefinite"/><animateTransform attributeName="transform" type="rotate" values="0;720" dur="1.8s" repeatCount="indefinite"/><animate attributeName="opacity" values="0.8;0" dur="1.8s" repeatCount="indefinite"/></rect><rect x="143" y="155" width="10" height="10"><animate attributeName="y" values="155;235" dur="2s" repeatCount="indefinite" begin="0.3s"/><animate attributeName="x" values="143;158" dur="2s" repeatCount="indefinite" begin="0.3s"/><animateTransform attributeName="transform" type="rotate" values="0;-540" dur="2s" repeatCount="indefinite" begin="0.3s"/><animate attributeName="opacity" values="0.8;0" dur="2s" repeatCount="indefinite" begin="0.3s"/></rect></g><circle cx="100" cy="135" r="12" fill="#ffd700" opacity="0.5"><animate attributeName="r" values="12;35;12" dur="0.8s" repeatCount="indefinite"/><animate attributeName="opacity" values="0.5;0.1;0.5" dur="0.8s" repeatCount="indefinite"/></circle></svg>`;}
    function generateStar(){return`<svg viewBox="0 0 200 240" xmlns="http://www.w3.org/2000/svg"><defs><linearGradient id="fg17" x1="50%" y1="0%" x2="50%" y2="100%"><stop offset="0%" stop-color="#ffd700"/><stop offset="100%" stop-color="#d4af37"/></linearGradient><filter id="starGlow"><feGaussianBlur stdDeviation="3" result="blur"/><feMerge><feMergeNode in="blur"/><feMergeNode in="SourceGraphic"/></feMerge></filter></defs><g fill="#ffd700">${Array.from({length:20},(_,i)=>{const x=15+(i*37)%170;const y=15+(i*23)%80;const r=1+(i%3)*0.5;const dur=2+(i%5)*0.5;return`<circle cx="${x}" cy="${y}" r="${r}" opacity="0.4"><animate attributeName="opacity" values="0.4;0.8;0.4" dur="${dur}s" repeatCount="indefinite" begin="${i*0.2}s"/></circle>`;}).join('')}</g><g stroke="#ffd700" stroke-width="2" stroke-linecap="round">${Array.from({length:16},(_,i)=>{const a=(i*22.5)*Math.PI/180;const x1=100+Math.cos(a)*30;const y1=105+Math.sin(a)*30;const x2=100+Math.cos(a)*75;const y2=105+Math.sin(a)*75;const dur=1.5+(i%4)*0.3;return`<line x1="${x1}" y1="${y1}" x2="${x2}" y2="${y2}" opacity="0.5"><animate attributeName="opacity" values="0.5;0.9;0.5" dur="${dur}s" repeatCount="indefinite" begin="${i*0.1}s"/><animate attributeName="x2" values="${x2};${100+Math.cos(a)*85};${x2}" dur="${dur}s" repeatCount="indefinite" begin="${i*0.1}s"/><animate attributeName="y2" values="${y2};${105+Math.sin(a)*85};${y2}" dur="${dur}s" repeatCount="indefinite" begin="${i*0.1}s"/></line>`;}).join('')}</g><g fill="url(#fg17)" filter="url(#starGlow)"><polygon points="100,35 106,85 100,75 94,85" opacity="0.9"/><polygon points="100,175 106,125 100,135 94,125" opacity="0.9"/><polygon points="30,105 80,111 70,105 80,99" opacity="0.9"/><polygon points="170,105 120,111 130,105 120,99" opacity="0.9"/><polygon points="51,56 88,93 80,88 85,80" opacity="0.9"/><polygon points="149,56 112,93 120,88 115,80" opacity="0.9"/><polygon points="51,154 88,117 80,122 85,130" opacity="0.9"/><polygon points="149,154 112,117 120,122 115,130" opacity="0.9"/></g><ellipse cx="100" cy="105" rx="14" ry="17" fill="#d4af37"><animate attributeName="ry" values="17;21;17" dur="2s" repeatCount="indefinite"/></ellipse><ellipse cx="100" cy="95" rx="10" ry="5" fill="#8b5a2b"/><circle cx="100" cy="105" r="8" fill="#fff" opacity="0.4"><animate attributeName="r" values="8;12;8" dur="2s" repeatCount="indefinite"/></circle><ellipse cx="100" cy="215" rx="50" ry="12" fill="#4d94ff" opacity="0.25"><animate attributeName="rx" values="50;55;50" dur="3s" repeatCount="indefinite"/></ellipse></svg>`;}
    function generateMoon(){return`<svg viewBox="0 0 200 240" xmlns="http://www.w3.org/2000/svg"><defs><linearGradient id="fg18" x1="0%" y1="0%" x2="100%" y2="100%"><stop offset="0%" stop-color="#9d4edd"/><stop offset="100%" stop-color="#c44dff"/></linearGradient><filter id="moonGlow"><feGaussianBlur stdDeviation="2" result="blur"/><feMerge><feMergeNode in="blur"/><feMergeNode in="SourceGraphic"/></feMerge></filter></defs><g filter="url(#moonGlow)"><circle cx="100" cy="45" r="32" fill="#c0c0c0" opacity="0.9"><animate attributeName="opacity" values="0.9;0.7;0.9" dur="4s" repeatCount="indefinite"/></circle><circle cx="118" cy="40" r="28" fill="#0a0a15"/></g><circle cx="85" cy="38" r="5" fill="#a0a0a0" opacity="0.4"/><circle cx="95" cy="55" r="3" fill="#a0a0a0" opacity="0.3"/><g stroke="url(#fg18)" stroke-width="1.5" fill="none">${Array.from({length:17},(_,i)=>{const sa=-70+(i*140/16);const a=sa*Math.PI/180;const x2=100+Math.cos(a)*95;const y2=130+Math.sin(a)*85;const cx=100+Math.cos(a)*35;const cy=130+Math.sin(a)*25;const op=0.3+(i%3)*0.15;const dur=2+(i%5)*0.4;return`<path d="M100,90 Q${cx},${cy} ${x2},${y2}" stroke-dasharray="6,4" opacity="${op}"><animate attributeName="stroke-dashoffset" from="0" to="20" dur="${dur}s" repeatCount="indefinite"/></path>`;}).join('')}</g><circle cx="100" cy="115" r="12" fill="url(#fg18)" opacity="0.7"><animate attributeName="r" values="12;18;12" dur="2.5s" repeatCount="indefinite"/></circle><circle cx="100" cy="115" r="6" fill="#c77dff" opacity="0.9"><animate attributeName="r" values="6;9;6" dur="2.5s" repeatCount="indefinite"/></circle><g fill="#c44dff" font-family="serif" font-size="18" opacity="0.6"><text x="55" y="155"><animate attributeName="y" values="155;150;155;160;155" dur="3s" repeatCount="indefinite"/>?</text><text x="145" y="150"><animate attributeName="y" values="150;155;150;145;150" dur="3.5s" repeatCount="indefinite"/>?</text></g><ellipse cx="100" cy="210" rx="70" ry="15" fill="url(#fg18)" opacity="0.2"><animate attributeName="rx" values="70;80;70" dur="5s" repeatCount="indefinite"/></ellipse></svg>`;}
    function generateSun(){return`<svg viewBox="0 0 200 240" xmlns="http://www.w3.org/2000/svg"><defs><linearGradient id="fg19" x1="50%" y1="0%" x2="50%" y2="100%"><stop offset="0%" stop-color="#ffd700"/><stop offset="100%" stop-color="#ff6b1a"/></linearGradient><filter id="sunGlow"><feGaussianBlur stdDeviation="4" result="blur"/><feMerge><feMergeNode in="blur"/><feMergeNode in="SourceGraphic"/></feMerge></filter></defs><g stroke="url(#fg19)" stroke-width="2" stroke-linecap="round" opacity="0.6">${Array.from({length:24},(_,i)=>{const a=(i*15)*Math.PI/180;const iR=55;const oR=75+(i%3)*8;const x1=100+Math.cos(a)*iR;const y1=95+Math.sin(a)*iR;const x2=100+Math.cos(a)*oR;const y2=95+Math.sin(a)*oR;const dur=1.2+(i%4)*0.25;return`<line x1="${x1}" y1="${y1}" x2="${x2}" y2="${y2}"><animate attributeName="x2" values="${x2};${100+Math.cos(a)*(oR+12)};${x2}" dur="${dur}s" repeatCount="indefinite" begin="${i*0.05}s"/><animate attributeName="y2" values="${y2};${95+Math.sin(a)*(oR+12)};${y2}" dur="${dur}s" repeatCount="indefinite" begin="${i*0.05}s"/></line>`;}).join('')}</g><circle cx="100" cy="95" r="45" fill="url(#fg19)" opacity="0.95" filter="url(#sunGlow)"><animate attributeName="r" values="45;50;45" dur="2s" repeatCount="indefinite"/></circle><circle cx="100" cy="95" r="35" fill="#ffd700"><animate attributeName="r" values="35;38;35" dur="2s" repeatCount="indefinite"/></circle><circle cx="100" cy="95" r="22" fill="#fff" opacity="0.4"><animate attributeName="r" values="22;26;22" dur="2s" repeatCount="indefinite"/></circle><g><circle cx="55" cy="190" r="14" fill="#9d4edd" opacity="0.6"><animate attributeName="cy" values="190;185;190;195;190" dur="2s" repeatCount="indefinite"/></circle><circle cx="100" cy="195" r="14" fill="#ff6b1a" opacity="0.6"><animate attributeName="cy" values="195;190;195;200;195" dur="2s" repeatCount="indefinite" begin="0.3s"/></circle><circle cx="145" cy="190" r="14" fill="#1a7a6c" opacity="0.6"><animate attributeName="cy" values="190;195;190;185;190" dur="2s" repeatCount="indefinite" begin="0.6s"/></circle></g><path d="M55,190 Q100,165 145,190" fill="none" stroke="#ffd700" stroke-width="2" opacity="0.5"><animate attributeName="d" values="M55,190 Q100,165 145,190;M55,185 Q100,160 145,185;M55,190 Q100,165 145,190" dur="2s" repeatCount="indefinite"/></path><text x="100" y="230" text-anchor="middle" font-family="Cinzel,serif" font-size="16" font-weight="bold" fill="#ff6b1a"><animate attributeName="opacity" values="0.8;1;0.8" dur="1s" repeatCount="indefinite"/>HONK</text></svg>`;}
    function generateJudgement(){return`<svg viewBox="0 0 200 240" xmlns="http://www.w3.org/2000/svg"><defs><linearGradient id="fg20" x1="0%" y1="100%" x2="0%" y2="0%"><stop offset="0%" stop-color="#ffd700"/><stop offset="50%" stop-color="#ff6b9d"/><stop offset="100%" stop-color="#c44dff"/></linearGradient><filter id="callGlow"><feGaussianBlur stdDeviation="3" result="blur"/><feMerge><feMergeNode in="blur"/><feMergeNode in="SourceGraphic"/></feMerge></filter></defs><circle cx="100" cy="35" r="40" fill="none" stroke="url(#fg20)" stroke-width="1" opacity="0.3"><animate attributeName="r" values="30;50;30" dur="2s" repeatCount="indefinite"/><animate attributeName="opacity" values="0.3;0;0.3" dur="2s" repeatCount="indefinite"/></circle><circle cx="100" cy="35" r="30" fill="none" stroke="url(#fg20)" stroke-width="1" opacity="0.4"><animate attributeName="r" values="25;45;25" dur="2s" repeatCount="indefinite" begin="0.5s"/><animate attributeName="opacity" values="0.4;0;0.4" dur="2s" repeatCount="indefinite" begin="0.5s"/></circle><circle cx="100" cy="35" r="22" fill="url(#fg20)" opacity="0.85" filter="url(#callGlow)"><animate attributeName="r" values="22;28;22" dur="2s" repeatCount="indefinite"/></circle><circle cx="100" cy="35" r="10" fill="#fff" opacity="0.6"><animate attributeName="r" values="10;14;10" dur="2s" repeatCount="indefinite"/></circle><g stroke="url(#fg20)" stroke-width="2" fill="none"><path d="M100,55 Q65,95 50,140" stroke-dasharray="6,4" opacity="0.6"><animate attributeName="stroke-dashoffset" from="0" to="-20" dur="1.5s" repeatCount="indefinite"/></path><path d="M100,55 Q100,100 100,145" stroke-dasharray="6,4" opacity="0.7"><animate attributeName="stroke-dashoffset" from="0" to="-20" dur="1.5s" repeatCount="indefinite"/></path><path d="M100,55 Q135,95 150,140" stroke-dasharray="6,4" opacity="0.6"><animate attributeName="stroke-dashoffset" from="0" to="-20" dur="1.5s" repeatCount="indefinite"/></path></g><line x1="20" y1="160" x2="180" y2="160" stroke="#d4af37" stroke-width="2" opacity="0.6"><animate attributeName="opacity" values="0.6;0.9;0.6" dur="2s" repeatCount="indefinite"/></line><g fill="none" stroke-width="2.5"><polygon points="45,210 28,175 62,175" stroke="#9d4edd" opacity="0.85"><animate attributeName="points" values="45,210 28,175 62,175;45,175 28,140 62,140;45,210 28,175 62,175" dur="3s" repeatCount="indefinite"/></polygon><polygon points="100,220 83,185 117,185" stroke="#ff6b1a" opacity="0.85"><animate attributeName="points" values="100,220 83,185 117,185;100,175 83,140 117,140;100,220 83,185 117,185" dur="3.5s" repeatCount="indefinite" begin="0.2s"/></polygon><polygon points="155,210 138,175 172,175" stroke="#1a7a6c" opacity="0.85"><animate attributeName="points" values="155,210 138,175 172,175;155,180 138,145 172,145;155,210 138,175 172,175" dur="2.8s" repeatCount="indefinite" begin="0.4s"/></polygon></g></svg>`;}
    function generateWorld(){return`<svg viewBox="0 0 200 240" xmlns="http://www.w3.org/2000/svg"><defs><linearGradient id="fg21" x1="0%" y1="0%" x2="100%" y2="100%"><stop offset="0%" stop-color="#9d4edd"/><stop offset="25%" stop-color="#ff6b1a"/><stop offset="50%" stop-color="#1a7a6c"/><stop offset="75%" stop-color="#ffd700"/><stop offset="100%" stop-color="#9d4edd"/></linearGradient><filter id="worldGlow"><feGaussianBlur stdDeviation="2" result="blur"/><feMerge><feMergeNode in="blur"/><feMergeNode in="SourceGraphic"/></feMerge></filter></defs><circle cx="100" cy="115" r="98" fill="none" stroke="url(#fg21)" stroke-width="1" opacity="0.2"><animate attributeName="r" values="98;105;98" dur="5s" repeatCount="indefinite"/></circle><circle cx="100" cy="115" r="85" fill="none" stroke="url(#fg21)" stroke-width="5" filter="url(#worldGlow)"><animateTransform attributeName="transform" type="rotate" from="0 100 115" to="360 100 115" dur="25s" repeatCount="indefinite"/></circle><circle cx="100" cy="115" r="75" fill="none" stroke="url(#fg21)" stroke-width="2" opacity="0.4" stroke-dasharray="12,6"><animateTransform attributeName="transform" type="rotate" from="360 100 115" to="0 100 115" dur="20s" repeatCount="indefinite"/></circle><g><circle cx="100" cy="30" r="14" fill="none" stroke="#9d4edd" stroke-width="2.5"><animate attributeName="r" values="14;17;14" dur="2s" repeatCount="indefinite"/></circle><circle cx="100" cy="30" r="8" fill="#9d4edd" opacity="0.5"/><circle cx="100" cy="200" r="14" fill="none" stroke="#ff6b1a" stroke-width="2.5"><animate attributeName="r" values="14;17;14" dur="2s" repeatCount="indefinite" begin="0.5s"/></circle><circle cx="100" cy="200" r="8" fill="#ff6b1a" opacity="0.5"/><circle cx="15" cy="115" r="14" fill="none" stroke="#1a7a6c" stroke-width="2.5"><animate attributeName="r" values="14;17;14" dur="2s" repeatCount="indefinite" begin="1s"/></circle><circle cx="15" cy="115" r="8" fill="#1a7a6c" opacity="0.5"/><circle cx="185" cy="115" r="14" fill="none" stroke="#4a7023" stroke-width="2.5"><animate attributeName="r" values="14;17;14" dur="2s" repeatCount="indefinite" begin="1.5s"/></circle><circle cx="185" cy="115" r="8" fill="#4a7023" opacity="0.5"/></g><g fill="none" stroke-width="2" opacity="0.7"><animateTransform attributeName="transform" type="rotate" from="0 100 115" to="360 100 115" dur="15s" repeatCount="indefinite"/><circle cx="100" cy="90" r="28" stroke="#9d4edd"/><circle cx="76" cy="130" r="28" stroke="#ff6b1a"/><circle cx="124" cy="130" r="28" stroke="#1a7a6c"/></g><g stroke="#d4af37" stroke-width="1" opacity="0.3"><line x1="100" y1="45" x2="100" y2="185"/><line x1="30" y1="115" x2="170" y2="115"/></g><circle cx="100" cy="115" r="18" fill="#ffd700" opacity="0.8"><animate attributeName="r" values="18;22;18" dur="2.5s" repeatCount="indefinite"/></circle><circle cx="100" cy="115" r="12" fill="#fff" opacity="0.5"><animate attributeName="r" values="12;15;12" dur="2.5s" repeatCount="indefinite"/></circle><circle cx="100" cy="115" r="6" fill="#ffd700" opacity="0.9"/></svg>`;}
    let quantumState={psi:0,beta:0,alpha:0,gamma:0,phase:'SUPERPOSITION',startTime:Date.now(),animationFrame:null};
    let currentSpread=Array(9).fill(null);
    let spreadTimestamp=null;
    let lockedQuantum={psi:0,beta:0,alpha:0,gamma:0};
    let cardDerivations=[];
    function updateQuantumField(){if(quantumState.phase==='SUPERPOSITION'){const t=(Date.now()-quantumState.startTime)/1000;quantumState.psi=Math.sin(t*1.1)*Math.cos(t*0.7);quantumState.beta=Math.cos(t*0.9)*Math.sin(t*1.3);quantumState.alpha=Math.sin(t*1.5+Math.PI/4)*Math.cos(t*0.5);quantumState.gamma=Math.cos(t*0.6)*Math.sin(t*1.1+Math.PI/3);document.getElementById('coordPsi').textContent=quantumState.psi.toFixed(3);document.getElementById('coordBeta').textContent=quantumState.beta.toFixed(3);document.getElementById('coordAlpha').textContent=quantumState.alpha.toFixed(3);document.getElementById('coordGamma').textContent=quantumState.gamma.toFixed(3);}quantumState.animationFrame=requestAnimationFrame(updateQuantumField);}
    let intentInfluence={active:false,psiMod:0,betaMod:0,alphaMod:0,gammaMod:0,source:''};
    function computeIntentInfluence(title,question){const combined=(title||'')+(question||'');if(!combined.trim())return{active:false,psiMod:0,betaMod:0,alphaMod:0,gammaMod:0,source:''};let psiSum=0,betaSum=0,alphaSum=0,gammaSum=0;for(let i=0;i<combined.length;i++){const c=combined.charCodeAt(i);const pos=i%4;if(pos===0)psiSum+=c;else if(pos===1)betaSum+=c;else if(pos===2)alphaSum+=c;else gammaSum+=c;}const normalize=(v)=>(Math.sin(v*0.1)*0.3);return{active:true,psiMod:normalize(psiSum),betaMod:normalize(betaSum),alphaMod:normalize(alphaSum),gammaMod:normalize(gammaSum),source:combined.slice(0,50)};}
    function drawSpread(raw=false){quantumState.phase='COLLAPSED';document.getElementById('quantumDot').classList.add('locked');document.getElementById('quantumStatus').textContent='Phase Locked';document.getElementById('phaseDisplay').textContent='COLLAPSED';document.getElementById('phaseDisplay').style.color='var(--gold)';spreadTimestamp=new Date().toISOString();const title=document.getElementById('exportTitle')?.value||'';const question=document.getElementById('exportNotes')?.value||'';intentInfluence=raw?{active:false,psiMod:0,betaMod:0,alphaMod:0,gammaMod:0,source:''}:computeIntentInfluence(title,question);const modPsi=quantumState.psi+intentInfluence.psiMod;const modBeta=quantumState.beta+intentInfluence.betaMod;const modAlpha=quantumState.alpha+intentInfluence.alphaMod;const modGamma=quantumState.gamma+intentInfluence.gammaMod;lockedQuantum={psi:modPsi,beta:modBeta,alpha:modAlpha,gamma:modGamma,raw:{psi:quantumState.psi,beta:quantumState.beta,alpha:quantumState.alpha,gamma:quantumState.gamma}};const seed=Math.abs(modPsi*10000+modBeta*1000+modAlpha*100+modGamma*10);const available=[...tarotCards];currentSpread=[];cardDerivations=[];for(let i=0;i<9;i++){const posOffset=i*137.508;const rawIdx=(seed+posOffset)%available.length;const idx=Math.floor(rawIdx);const card=available.splice(idx,1)[0];currentSpread.push(card);cardDerivations.push({seed:seed.toFixed(4),posOffset:posOffset.toFixed(3),rawIdx:rawIdx.toFixed(4),selectedId:card.id,intentActive:intentInfluence.active});}renderSpread();showToast(intentInfluence.active?'Spread attuned to your intent':'Raw quantum spread drawn');}
    function drawRawSpread(){drawSpread(true);}
    function newReading(){quantumState.phase='SUPERPOSITION';quantumState.startTime=Date.now();document.getElementById('quantumDot').classList.remove('locked');document.getElementById('quantumStatus').textContent='Field Active';document.getElementById('phaseDisplay').textContent='SUPERPOSITION';document.getElementById('phaseDisplay').style.color='var(--quantum-purple)';currentSpread=Array(9).fill(null);cardDerivations=[];intentInfluence={active:false,psiMod:0,betaMod:0,alphaMod:0,gammaMod:0,source:''};renderSpread();showInstructions();}
    function renderSpread(){const grid=document.getElementById('spreadGrid');const positions=[{name:'Past Foundation',row:'past'},{name:'Past Heart',row:'past'},{name:'Past Outcome',row:'past'},{name:'Present Challenge',row:'present'},{name:'Present Self',row:'present'},{name:'Present Blessing',row:'present'},{name:'Future Fear',row:'future'},{name:'Future Hope',row:'future'},{name:'Future Destiny',row:'future'}];grid.innerHTML=positions.map((pos,idx)=>{const card=currentSpread[idx];if(!card)return`<div class="spread-panel empty row-${pos.row}"><div class="panel-header"><div class="panel-position">${pos.name}</div><div class="panel-numeral">#${idx+1}</div></div><div class="panel-card-display"><div class="panel-empty-state"><div class="sigil">⧫</div>Awaiting Draw</div></div><div class="panel-info"><div class="panel-greek">—</div><div class="panel-title">—</div><div class="panel-subtitle">—</div></div></div>`;return`<div class="spread-panel row-${pos.row}" data-entity="${card.entity}" onclick="openCardModal(${idx})"><div class="panel-header"><div class="panel-position">${pos.name}</div><div class="panel-numeral">${card.numeral}</div></div><div class="panel-card-display">${generateCardSVG(card.id)}</div><div class="panel-info"><div class="panel-greek">${card.greekLetters}</div><div class="panel-title">${card.title}</div><div class="panel-subtitle">${card.subtitle}</div></div></div>`;}).join('');}
    function getQuantumMetaphor(idx,psi,beta,alpha,gamma){const metaphors=[
      `<b>ψ (Possibility)</b> anchors this position. Your past foundation emerged from the wave function's deepest potential (ψ=${psi.toFixed(3)}). Like the quantum field before observation, all foundations exist as probability until memory collapses them into story.`,
      `<b>β (Synchronicity)</b> governs past heart. The phase angle (β=${beta.toFixed(3)}) determined the timing of emotional resonance—when feelings aligned across the interference pattern of experience.`,
      `<b>α (Manifestation)</b> shaped past outcome. The amplitude coefficient (α=${alpha.toFixed(3)}) determined how strongly potential became actual—the intensity with which possibility crystallized into event.`,
      `<b>γ (Transformation)</b> defines present challenge. The decay rate (γ=${gamma.toFixed(3)}) reveals what must change—the transition energy required to move between quantum states of being.`,
      `<b>All Four States</b> collapse into present self. At position ${idx}, the complete quantum signature [ψ,β,α,γ] converges—you are the superposition observed, the wave function becoming particle.`,
      `<b>The Golden Spiral</b> reveals present blessing. Offset by 137.508° × 5 (the angle of optimal growth), this position finds what nature herself would place here—abundance following sacred geometry.`,
      `<b>ψ Uncertainty</b> projects future fear. The wave function's inherent indeterminacy (ψ=${psi.toFixed(3)}) casts shadow-possibilities forward—fear is probability space unexplored.`,
      `<b>Constructive Interference</b> builds future hope. Where wave peaks align (β=${beta.toFixed(3)}, α=${alpha.toFixed(3)}), amplitude doubles—hope is the resonance of aligned intention.`,
      `<b>Ω Integration</b> completes future destiny. All quantum numbers spiral toward this final position—the terminus where scattered probabilities reunite as witnessed truth.`
    ];return metaphors[idx]||'Quantum state determines card selection through wave function collapse.';}
    function openCardModal(idx){const card=currentSpread[idx];if(!card)return;const positions=['Past Foundation','Past Heart','Past Outcome','Present Challenge','Present Self','Present Blessing','Future Fear','Future Hope','Future Destiny'];const temporal=idx<3?'PAST':(idx<6?'PRESENT':'FUTURE');const ec={squirrel:{color:'#9d4edd',border:'#9d4edd'},goose:{color:'#ff6b1a',border:'#ff6b1a'},duck:{color:'#4dffc3',border:'#1a7a6c'},oak:{color:'#6b8e23',border:'#4a7023'},merged:{color:'#ffd700',border:'#d4af37'}}[card.entity]||{color:'#ffd700',border:'#d4af37'};const deriv=cardDerivations[idx]||{};const metaphor=getQuantumMetaphor(idx,lockedQuantum.psi,lockedQuantum.beta,lockedQuantum.alpha,lockedQuantum.gamma);document.getElementById('modalCardImage').innerHTML=generateCardSVG(card.id);document.getElementById('modalNumeral').textContent=card.numeral;document.getElementById('modalGreek').innerHTML=card.greekLetters;document.getElementById('modalGreek').style.color=ec.color;document.getElementById('modalTitle').textContent=card.title;document.getElementById('modalSubtitle').textContent=card.subtitle;document.getElementById('modalEntity').textContent=card.entity.toUpperCase()+' PILLAR';document.getElementById('modalEntity').style.color=ec.color;document.getElementById('modalEntity').style.borderColor=ec.border;document.getElementById('modalBody').innerHTML=`<div class="modal-section"><div class="modal-section-title">Position in Spread</div><div class="modal-section-content">${positions[idx]} (#${idx+1}) — ${temporal} Timeline</div></div><div class="modal-section"><div class="modal-section-title">Quantum Derivation</div><div class="modal-section-content" style="line-height:1.7;">${metaphor}</div></div><div class="modal-section"><div class="modal-section-title">Traditional Meaning</div><div class="modal-section-content">${card.traditionalMeaning}</div></div><div class="modal-section"><div class="modal-section-title">Reversed Interpretation</div><div class="modal-section-content">${card.reversedMeaning}</div></div><div class="modal-section"><div class="modal-section-title">HONKFIRE Empire Lore</div><div class="modal-section-content">${card.empireLore}</div></div><div class="modal-section"><div class="modal-section-title">Sacred Wisdom</div><div class="modal-section-content">${card.sacredWisdom}</div></div><div class="modal-section"><div class="modal-section-title">Keywords</div><div class="modal-keywords">${card.keywords.map(k=>`<span class="modal-keyword">${k}</span>`).join('')}</div></div><div class="ai-instruction-box"><div class="ai-instruction-title">⚙ AI Instruction Snippet</div><div class="ai-instruction-content">CARD: ${card.numeral} - ${card.title}
GREEK: ${card.greekLetters}
MATH: ${card.mathContext}
POSITION: ${positions[idx]} (${temporal})
KEYWORDS: ${card.keywords.join(', ')}
QUANTUM: [${lockedQuantum.psi.toFixed(4)}, ${lockedQuantum.beta.toFixed(4)}, ${lockedQuantum.alpha.toFixed(4)}, ${lockedQuantum.gamma.toFixed(4)}]
DERIVATION: seed(${deriv.seed||'—'}) + offset(${deriv.posOffset||'—'}) → card[${deriv.selectedId!==undefined?deriv.selectedId:'—'}]</div></div>`;document.getElementById('cardModalOverlay').classList.add('active');}
    function closeCardModal(e){if(e&&e.target!==e.currentTarget)return;document.getElementById('cardModalOverlay').classList.remove('active');}
    function showInstructions(){document.getElementById('instructionOverlay').classList.remove('hidden');}
    function closeInstructions(){document.getElementById('instructionOverlay').classList.add('hidden');}
    function drawAndClose(){closeInstructions();setTimeout(()=>drawSpread(false),300);}
    function drawRawAndClose(){closeInstructions();setTimeout(()=>drawSpread(true),300);}
    function openExport(){updateExportPreview();document.getElementById('exportOverlay').classList.add('active');}
    function closeExport(e){if(e&&e.target!==e.currentTarget)return;document.getElementById('exportOverlay').classList.remove('active');}
    function updateExportPreview(){const p=document.getElementById('exportPreview');if(!currentSpread[0]){p.textContent='No spread drawn yet.';return;}const d=generateExportData();const intentStr=intentInfluence.active?`Intent: ACTIVE (${intentInfluence.source.slice(0,20)}...)`:' Intent: RAW';p.textContent=`Title: ${d.title||'Untitled'}\n${intentStr}\nCards: ${d.cards.map(c=>c.title).join(', ')}\nQuantum: [ψ:${d.quantumState.psi.toFixed(4)} β:${d.quantumState.beta.toFixed(4)} α:${d.quantumState.alpha.toFixed(4)} γ:${d.quantumState.gamma.toFixed(4)}]`;}
    function generateExportData(){const positions=['Past Foundation','Past Heart','Past Outcome','Present Challenge','Present Self','Present Blessing','Future Fear','Future Hope','Future Destiny'];return{title:document.getElementById('exportTitle').value||'Tarot Reading',notes:document.getElementById('exportNotes').value||'',timestamp:spreadTimestamp,intentInfluence:{active:intentInfluence.active,modifiers:{psi:intentInfluence.psiMod,beta:intentInfluence.betaMod,alpha:intentInfluence.alphaMod,gamma:intentInfluence.gammaMod}},quantumState:{psi:lockedQuantum.psi,beta:lockedQuantum.beta,alpha:lockedQuantum.alpha,gamma:lockedQuantum.gamma},cards:currentSpread.map((c,i)=>({position:i+1,positionName:positions[i],numeral:c.numeral,title:c.title,subtitle:c.subtitle,greekLetters:c.greekLetters,keywords:c.keywords,mathContext:c.mathContext,derivation:cardDerivations[i]||{}}))};}
    function generateRawTXT(){const d=generateExportData();const qStr=`[ψ:${d.quantumState.psi.toFixed(4)} β:${d.quantumState.beta.toFixed(4)} α:${d.quantumState.alpha.toFixed(4)} γ:${d.quantumState.gamma.toFixed(4)}]`;const intentStr=d.intentInfluence.active?`INTENT-ATTUNED (mods: ψ+${d.intentInfluence.modifiers.psi.toFixed(3)} β+${d.intentInfluence.modifiers.beta.toFixed(3)} α+${d.intentInfluence.modifiers.alpha.toFixed(3)} γ+${d.intentInfluence.modifiers.gamma.toFixed(3)})`:'RAW QUANTUM (no intent modulation)';let t=`╔══════════════════════════════════════════════════════════════╗
║  TAROT READING — QUANTUM EXPORT                              ║
╠══════════════════════════════════════════════════════════════╣
║  ${(d.title||'Untitled').padEnd(57)}║
╚══════════════════════════════════════════════════════════════╝

MODE: ${intentStr}
LOCKED QUANTUM STATE: ${qStr}
Timestamp: ${d.timestamp}

RAW CARD DATA:
`;d.cards.forEach(c=>{const der=c.derivation||{};t+=`
┌────────────────────────────────────────┐
│ POSITION ${c.position}: ${c.positionName.padEnd(27)}│
├────────────────────────────────────────┤
│ Card: ${(c.numeral+' - '+c.title).padEnd(32)}│
│ Greek: ${c.greekLetters.padEnd(31)}│
│ Quantum: seed(${(der.seed||'—').toString().slice(0,6)}) + φ(${(der.posOffset||'—').toString().slice(0,6)})  │
│ Keywords: ${c.keywords.slice(0,3).join(', ').padEnd(28)}│
└────────────────────────────────────────┘
`;});t+=`
═════════════════════════════════════════════════════════════
Generated by HONKFIRE TAROT — All territory is belong to us.
`;return t;}
    function copyToClipboard(){if(!currentSpread[0]){showToast('No spread to export');return;}navigator.clipboard.writeText(generateRawTXT()).then(()=>showToast('Copied to clipboard'));}
    function downloadTXT(){if(!currentSpread[0]){showToast('No spread');return;}const b=new Blob([generateRawTXT()],{type:'text/plain'});const u=URL.createObjectURL(b);const a=document.createElement('a');a.href=u;a.download=`honkfire-${Date.now()}.txt`;a.click();URL.revokeObjectURL(u);showToast('TXT downloaded');}
    function downloadJSON(){if(!currentSpread[0]){showToast('No spread');return;}const b=new Blob([JSON.stringify(generateExportData(),null,2)],{type:'application/json'});const u=URL.createObjectURL(b);const a=document.createElement('a');a.href=u;a.download=`honkfire-${Date.now()}.json`;a.click();URL.revokeObjectURL(u);showToast('JSON downloaded');}
    function showToast(m){const t=document.getElementById('toast');t.textContent=m;t.classList.add('show');setTimeout(()=>t.classList.remove('show'),2500);}
    function openLLMGuide(){document.getElementById('llmGuideOverlay').classList.add('active');}
    function closeLLMGuide(e){if(e&&e.target!==e.currentTarget)return;document.getElementById('llmGuideOverlay').classList.remove('active');}
    function copyLLMGuide(){const guide=`LLM TAROT READING SESSION GUIDE
════════════════════════════════════════════════════════════════════

STEP 1: LOAD & INITIALIZE
─────────────────────────
1. Open the HONKFIRE Tarot HTML file in a browser environment
2. The quantum field begins cycling automatically (observe ψ, β, α, γ coordinates updating)
3. A startup modal appears with "Pull 9-Card Spread" button
4. Click "Pull 9-Card Spread" to collapse the wave function
5. Note the LOCKED quantum state: [ψ, β, α, γ] — these determine all 9 cards

STEP 2: EXTRACT CARD DATA
─────────────────────────
For each of the 9 positions, click the card panel to open its modal:

POSITION 1: Past Foundation    → Click card → Record AI Instruction Snippet
POSITION 2: Past Heart         → Click card → Record AI Instruction Snippet
POSITION 3: Past Outcome       → Click card → Record AI Instruction Snippet
POSITION 4: Present Challenge  → Click card → Record AI Instruction Snippet
POSITION 5: Present Self       → Click card → Record AI Instruction Snippet
POSITION 6: Present Blessing   → Click card → Record AI Instruction Snippet
POSITION 7: Future Fear        → Click card → Record AI Instruction Snippet
POSITION 8: Future Hope        → Click card → Record AI Instruction Snippet
POSITION 9: Future Destiny     → Click card → Record AI Instruction Snippet

Alternatively: Click "Export" → "Copy Text" for all cards at once

STEP 3: INTERPRETATION FRAMEWORK
────────────────────────────────
Structure your reading interpretation as follows:

A. QUANTUM SIGNATURE ANALYSIS
   - Report the locked state [ψ, β, α, γ]
   - Note dominant polarity (positive/negative values)
   - Identify which coordinate has highest magnitude

B. TEMPORAL ARC READING
   - PAST (Cards 1-3): Foundation → Heart → Outcome
     Synthesize narrative of what built this moment
   - PRESENT (Cards 4-6): Challenge → Self → Blessing
     Identify current tensions and available resources
   - FUTURE (Cards 7-9): Fear → Hope → Destiny
     Map shadow and light toward likely resolution

C. CROSS-POSITION PATTERNS
   - Diagonal: Card 1 → Card 5 → Card 9 (soul line)
   - Vertical centers: Card 2 → Card 5 → Card 8 (heart line)
   - Entity clustering: Note if squirrel/goose/duck/oak/merged dominate

D. SYNTHESIS
   - One-paragraph narrative weaving all 9 cards
   - Core message in single sentence
   - Recommended action or contemplation

STEP 4: OUTPUT FORMAT
─────────────────────
Present interpretation using this structure:

═══════════════════════════════════════════════
TAROT READING INTERPRETATION
Quantum Signature: [ψ, β, α, γ]
Timestamp: [ISO timestamp]
═══════════════════════════════════════════════

◈ THE PAST (What shaped this moment)
  [Card 1] as Foundation: [interpretation]
  [Card 2] as Heart: [interpretation]
  [Card 3] as Outcome: [interpretation]
  → Past synthesis: [1-2 sentences]

◈ THE PRESENT (Where you stand now)
  [Card 4] as Challenge: [interpretation]
  [Card 5] as Self: [interpretation]
  [Card 6] as Blessing: [interpretation]
  → Present synthesis: [1-2 sentences]

◈ THE FUTURE (What unfolds ahead)
  [Card 7] as Fear: [interpretation]
  [Card 8] as Hope: [interpretation]
  [Card 9] as Destiny: [interpretation]
  → Future synthesis: [1-2 sentences]

◈ SOUL LINE (Diagonal 1→5→9)
  [Pattern observation]

◈ CORE MESSAGE
  [Single powerful sentence]

◈ RECOMMENDED CONTEMPLATION
  [Question or action for the querent]

═══════════════════════════════════════════════

INTERPRETATION PRINCIPLES
─────────────────────────
• Honor both Traditional Meaning AND Empire Lore
• The Quantum Derivation explains WHY this card appeared here
• Keywords are thematic anchors — weave at least 2 per card
• Greek letters carry mathematical/philosophical weight
• Entity type affects energy:
    - Squirrel: scattered, quantum, multidimensional
    - Goose: advancing, chaotic, transformative
    - Duck: still, reflective, meditative
    - Oak: rooted, foundational, eternal
    - Merged: unified, integrated, complete

• Reversed meanings apply when querent asks about obstacles
• The quantum state itself is meaningful:
    - High ψ: strong possibility/potential
    - High β: synchronicity active
    - High α: manifestation energy
    - High γ: transformation in progress

════════════════════════════════════════════════════════════════════
Generated by HONKFIRE TAROT — All territory is belong to us.
`;navigator.clipboard.writeText(guide).then(()=>showToast('LLM Guide copied to clipboard'));}
    document.addEventListener('keydown',e=>{if(e.key==='Escape'){closeCardModal();closeExport();closeInstructions();closeLLMGuide();}});
    document.getElementById('exportTitle')?.addEventListener('input',updateExportPreview);
    document.getElementById('exportNotes')?.addEventListener('input',updateExportPreview);
    const llmConsoleGuide=`
╔══════════════════════════════════════════════════════════════════════════════╗
║  ⧫ HONKFIRE TAROT — LLM SESSION GUIDE ⧫                                      ║
╚══════════════════════════════════════════════════════════════════════════════╝

STEP 1: LOAD & INITIALIZE
─────────────────────────
1. The quantum field is now cycling (ψ, β, α, γ coordinates updating)
2. Click "Pull 9-Card Spread" in the startup modal to collapse the wave function
3. Note the LOCKED quantum state: [ψ, β, α, γ] — these determine all 9 cards

STEP 2: EXTRACT CARD DATA
─────────────────────────
Click each card panel to open its modal and record the AI Instruction Snippet:
  Position 1: Past Foundation    Position 4: Present Challenge    Position 7: Future Fear
  Position 2: Past Heart         Position 5: Present Self         Position 8: Future Hope
  Position 3: Past Outcome       Position 6: Present Blessing     Position 9: Future Destiny

Alternative: Click "Export" → "Copy Text" for all cards at once

STEP 3: INTERPRETATION FRAMEWORK
────────────────────────────────
A. QUANTUM SIGNATURE ANALYSIS
   - Report locked state [ψ, β, α, γ], note dominant polarity, identify highest magnitude

B. TEMPORAL ARC READING
   - PAST (1-3): Foundation → Heart → Outcome — what built this moment
   - PRESENT (4-6): Challenge → Self → Blessing — current tensions and resources
   - FUTURE (7-9): Fear → Hope → Destiny — shadow and light toward resolution

C. CROSS-POSITION PATTERNS
   - Soul Line: Card 1 → Card 5 → Card 9 (diagonal)
   - Heart Line: Card 2 → Card 5 → Card 8 (vertical center)
   - Entity clustering: squirrel/goose/duck/oak/merged dominance

D. SYNTHESIS
   - One-paragraph narrative weaving all 9 cards
   - Core message in single sentence
   - Recommended contemplation

STEP 4: OUTPUT FORMAT
─────────────────────
═══════════════════════════════════════════════
TAROT READING INTERPRETATION
Quantum Signature: [ψ, β, α, γ]
═══════════════════════════════════════════════

◈ THE PAST (What shaped this moment)
  [Card 1] as Foundation: [interpretation]
  [Card 2] as Heart: [interpretation]
  [Card 3] as Outcome: [interpretation]
  → Past synthesis: [1-2 sentences]

◈ THE PRESENT (Where you stand now)
  [Card 4] as Challenge: [interpretation]
  [Card 5] as Self: [interpretation]
  [Card 6] as Blessing: [interpretation]
  → Present synthesis: [1-2 sentences]

◈ THE FUTURE (What unfolds ahead)
  [Card 7] as Fear: [interpretation]
  [Card 8] as Hope: [interpretation]
  [Card 9] as Destiny: [interpretation]
  → Future synthesis: [1-2 sentences]

◈ SOUL LINE (1→5→9): [pattern observation]
◈ CORE MESSAGE: [single powerful sentence]
◈ RECOMMENDED CONTEMPLATION: [question or action]

INTERPRETATION PRINCIPLES
─────────────────────────
• Honor both Traditional Meaning AND Empire Lore
• Keywords are thematic anchors — weave at least 2 per card
• Entity energies: Squirrel=scattered/quantum | Goose=advancing/chaotic | Duck=still/reflective | Oak=rooted/eternal | Merged=unified/complete
• Quantum meanings: High ψ=possibility | High β=synchronicity | High α=manifestation | High γ=transformation

═══════════════════════════════════════════════════════════════════════════════
All territory is belong to us.
`;
    document.addEventListener('DOMContentLoaded',()=>{updateQuantumField();renderSpread();console.log('%c⧫ HONKFIRE TAROT ⧫','color:#ffd700;font-size:20px;font-weight:bold');console.log('%c'+llmConsoleGuide,'color:#9d4edd;font-family:monospace;font-size:11px;');});
  </script>
</body>
</html>
