<!DOCTYPE html>
<html lang="en">
<head>
  <meta charset="UTF-8">
  <meta name="viewport" content="width=device-width, initial-scale=1.0">
  <title>ü¶Üüî• HONKFIRE EDITION | 52-Card Sacred Deck of the Empire</title>
  <link href="https://fonts.googleapis.com/css2?family=Cinzel+Decorative:wght@400;700;900&family=Cinzel:wght@400;700&family=EB+Garamond:ital,wght@0,400;0,600;1,400&family=Space+Mono:wght@400;700&display=swap" rel="stylesheet">
  <style>
    :root {
      /* Parchment tones */
      --parchment: #f4ead5;
      --parchment-dark: #e8dcc4;
      --parchment-shadow: #d4c4a8;
      --ink-brown: #3d2914;
      
      /* Sacred colors */
      --gold-leaf: #c9a227;
      --gold-bright: #ffd700;
      --duck-teal: #1a7a6c;
      --duck-deep: #0d4a42;
      --fire-orange: #ff6b1a;
      --fire-deep: #d4552a;
      --quantum-purple: #9d4edd;
      --sacred-purple: #4a2c6a;
      --acorn-brown: #8b5a2b;
      --oak-green: #2d5a3d;
      --blood-red: #8b1a1a;
      
      /* Void for contrast */
      --void: #0a0a0f;
    }

    * {
      margin: 0;
      padding: 0;
      box-sizing: border-box;
    }

    body {
      background: linear-gradient(180deg, var(--parchment) 0%, var(--parchment-dark) 100%);
      min-height: 100vh;
      font-family: 'EB Garamond', Georgia, serif;
      color: var(--ink-brown);
      overflow-x: hidden;
    }

    /* Parchment texture overlay */
    body::before {
      content: '';
      position: fixed;
      top: 0; left: 0; right: 0; bottom: 0;
      background: url("data:image/svg+xml,%3Csvg viewBox='0 0 200 200' xmlns='http://www.w3.org/2000/svg'%3E%3Cfilter id='noise'%3E%3CfeTurbulence type='fractalNoise' baseFrequency='0.8' numOctaves='4' stitchTiles='stitch'/%3E%3C/filter%3E%3Crect width='100%25' height='100%25' filter='url(%23noise)'/%3E%3C/svg%3E");
      opacity: 0.04;
      pointer-events: none;
      z-index: 1000;
    }

    /* Header - Papal Seal Style */
    .header {
      text-align: center;
      padding: 50px 20px;
      background: linear-gradient(180deg, rgba(201, 162, 39, 0.1) 0%, transparent 100%);
      border-bottom: 2px solid var(--gold-leaf);
      position: relative;
    }

    .header::before, .header::after {
      content: '‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê';
      position: absolute;
      bottom: -1px;
      color: var(--gold-leaf);
      font-size: 0.8rem;
      letter-spacing: -2px;
    }
    .header::before { left: 20px; }
    .header::after { right: 20px; }

    .seal-glyph {
      font-size: 70px;
      margin-bottom: 15px;
      filter: drop-shadow(0 4px 8px rgba(61, 41, 20, 0.3));
      animation: sealGlow 4s ease-in-out infinite;
    }

    @keyframes sealGlow {
      0%, 100% { filter: drop-shadow(0 4px 8px rgba(61, 41, 20, 0.3)) drop-shadow(0 0 20px rgba(201, 162, 39, 0.2)); }
      50% { filter: drop-shadow(0 4px 8px rgba(61, 41, 20, 0.3)) drop-shadow(0 0 40px rgba(201, 162, 39, 0.5)); }
    }

    .header-title {
      font-family: 'Cinzel Decorative', serif;
      font-size: 2.8rem;
      font-weight: 900;
      color: var(--duck-deep);
      letter-spacing: 0.15em;
      text-shadow: 2px 2px 0 rgba(201, 162, 39, 0.3);
      margin-bottom: 8px;
    }

    .header-subtitle {
      font-family: 'Cinzel', serif;
      font-size: 1rem;
      color: var(--fire-orange);
      letter-spacing: 0.3em;
      text-transform: uppercase;
    }

    .header-decree {
      margin-top: 20px;
      font-style: italic;
      color: var(--sacred-purple);
      max-width: 600px;
      margin-left: auto;
      margin-right: auto;
    }

    /* Sacred Legend */
    .sacred-legend {
      max-width: 1000px;
      margin: 30px auto;
      padding: 25px;
      background: rgba(255, 255, 255, 0.5);
      border: 2px solid var(--gold-leaf);
      position: relative;
    }

    .sacred-legend::before {
      content: '‚úß THE FOUR PILLARS OF THE EMPIRE ‚úß';
      position: absolute;
      top: -12px;
      left: 50%;
      transform: translateX(-50%);
      background: var(--parchment);
      padding: 0 20px;
      font-family: 'Cinzel', serif;
      font-size: 0.85rem;
      color: var(--gold-leaf);
      letter-spacing: 0.2em;
      white-space: nowrap;
    }

    .legend-grid {
      display: grid;
      grid-template-columns: repeat(4, 1fr);
      gap: 20px;
      margin-top: 10px;
    }

    .legend-item {
      text-align: center;
      padding: 20px 10px;
      border-radius: 8px;
      background: rgba(255, 255, 255, 0.6);
      border: 1px solid;
      transition: transform 0.3s ease;
    }

    .legend-item:hover {
      transform: translateY(-5px);
    }

    .legend-item.squirrel { border-color: var(--quantum-purple); }
    .legend-item.duck { border-color: var(--duck-teal); }
    .legend-item.goose { border-color: var(--fire-orange); }
    .legend-item.oak { border-color: var(--oak-green); }

    .legend-symbol {
      font-size: 2.5rem;
      margin-bottom: 10px;
    }

    .legend-name {
      font-family: 'Cinzel Decorative', serif;
      font-size: 1rem;
      font-weight: 700;
      margin-bottom: 5px;
    }

    .legend-domain {
      font-family: 'Space Mono', monospace;
      font-size: 0.7rem;
      opacity: 0.7;
    }

    .legend-motto {
      font-style: italic;
      font-size: 0.85rem;
      margin-top: 8px;
      color: var(--sacred-purple);
    }

    /* Filter Bar - Manuscript Style */
    .filter-bar {
      display: flex;
      justify-content: center;
      gap: 15px;
      padding: 25px;
      flex-wrap: wrap;
      background: linear-gradient(90deg, transparent, rgba(201, 162, 39, 0.1), transparent);
      border-bottom: 1px solid rgba(201, 162, 39, 0.3);
    }

    .filter-btn {
      padding: 12px 25px;
      border: 2px solid var(--gold-leaf);
      background: var(--parchment);
      color: var(--ink-brown);
      font-family: 'Cinzel', serif;
      font-size: 0.9rem;
      cursor: pointer;
      transition: all 0.3s ease;
      position: relative;
    }

    .filter-btn:hover, .filter-btn.active {
      background: var(--ink-brown);
      color: var(--parchment);
    }

    .filter-btn.squirrel:hover, .filter-btn.squirrel.active { background: var(--quantum-purple); border-color: var(--quantum-purple); color: #fff; }
    .filter-btn.duck:hover, .filter-btn.duck.active { background: var(--duck-teal); border-color: var(--duck-teal); color: #fff; }
    .filter-btn.goose:hover, .filter-btn.goose.active { background: var(--fire-orange); border-color: var(--fire-orange); color: #fff; }
    .filter-btn.oak:hover, .filter-btn.oak.active { background: var(--oak-green); border-color: var(--oak-green); color: #fff; }

    /* Suit Sections */
    .suit-section {
      padding: 40px 20px;
      max-width: 1400px;
      margin: 0 auto;
    }

    .suit-header {
      display: flex;
      align-items: center;
      gap: 20px;
      margin-bottom: 30px;
      padding: 25px;
      background: rgba(255, 255, 255, 0.6);
      border: 2px solid;
      border-radius: 4px;
      position: relative;
    }

    .suit-header::before {
      content: '';
      position: absolute;
      top: 5px; left: 5px; right: 5px; bottom: 5px;
      border: 1px solid;
      border-radius: 2px;
      pointer-events: none;
      opacity: 0.3;
    }

    .suit-header.squirrel { border-color: var(--quantum-purple); }
    .suit-header.squirrel::before { border-color: var(--quantum-purple); }
    .suit-header.duck { border-color: var(--duck-teal); }
    .suit-header.duck::before { border-color: var(--duck-teal); }
    .suit-header.goose { border-color: var(--fire-orange); }
    .suit-header.goose::before { border-color: var(--fire-orange); }
    .suit-header.oak { border-color: var(--oak-green); }
    .suit-header.oak::before { border-color: var(--oak-green); }

    .suit-glyph {
      font-size: 3.5rem;
    }

    .suit-info h2 {
      font-family: 'Cinzel Decorative', serif;
      font-size: 1.6rem;
      margin-bottom: 5px;
    }

    .suit-info .domain {
      font-family: 'Space Mono', monospace;
      font-size: 0.8rem;
      opacity: 0.7;
    }

    .suit-info .motto {
      font-style: italic;
      font-size: 0.95rem;
      color: var(--sacred-purple);
      margin-top: 5px;
    }

    .pillar-badge {
      margin-left: auto;
      padding: 10px 20px;
      font-family: 'Cinzel', serif;
      font-size: 0.85rem;
      font-weight: 700;
      color: #fff;
      border-radius: 4px;
    }

    .pillar-badge.scatter { background: var(--quantum-purple); }
    .pillar-badge.redirect { background: var(--duck-teal); }
    .pillar-badge.advance { background: var(--fire-orange); }
    .pillar-badge.root { background: var(--oak-green); }

    /* Card Grid */
    .card-grid {
      display: grid;
      grid-template-columns: repeat(auto-fill, minmax(180px, 1fr));
      gap: 25px;
      padding: 20px;
    }

    /* Card Container */
    .card-container {
      perspective: 1000px;
      cursor: pointer;
      aspect-ratio: 2.5/3.5;
    }

    .card-flipper {
      width: 100%;
      height: 100%;
      position: relative;
      transform-style: preserve-3d;
      transition: transform 0.7s ease;
    }

    .card-container:hover .card-flipper {
      transform: rotateY(180deg);
    }

    .card-front, .card-back {
      position: absolute;
      width: 100%;
      height: 100%;
      backface-visibility: hidden;
      border-radius: 8px;
      overflow: hidden;
      box-shadow: 0 4px 15px rgba(61, 41, 20, 0.3);
    }

    .card-front {
      background: var(--parchment);
      border: 3px solid var(--gold-leaf);
    }

    .card-back {
      background: linear-gradient(145deg, var(--ink-brown) 0%, #2a1a0a 100%);
      transform: rotateY(180deg);
      display: flex;
      flex-direction: column;
      justify-content: center;
      align-items: center;
      padding: 15px;
      text-align: center;
      border: 3px solid var(--gold-leaf);
      color: var(--parchment);
    }

    .card-back-title {
      font-family: 'Cinzel Decorative', serif;
      font-size: 0.9rem;
      color: var(--gold-bright);
      margin-bottom: 10px;
    }

    .card-back-verse {
      font-style: italic;
      font-size: 0.8rem;
      line-height: 1.6;
      opacity: 0.9;
    }

    .card-back-law {
      margin-top: 12px;
      padding-top: 10px;
      border-top: 1px solid rgba(201, 162, 39, 0.3);
      font-family: 'Space Mono', monospace;
      font-size: 0.65rem;
      color: var(--gold-leaf);
    }

    /* Modal */
    .modal {
      display: none;
      position: fixed;
      top: 0; left: 0; right: 0; bottom: 0;
      background: rgba(10, 10, 15, 0.95);
      z-index: 2000;
      justify-content: center;
      align-items: center;
      padding: 20px;
    }

    .modal.active {
      display: flex;
    }

    .modal-content {
      max-width: 380px;
      width: 100%;
      position: relative;
    }

    .modal-close {
      position: absolute;
      top: -45px;
      right: 0;
      background: none;
      border: none;
      color: var(--gold-leaf);
      font-size: 2.5rem;
      cursor: pointer;
      font-family: serif;
    }

    .modal-card {
      width: 100%;
      border-radius: 12px;
      box-shadow: 0 0 60px rgba(201, 162, 39, 0.4);
    }

    /* Footer */
    .footer {
      text-align: center;
      padding: 50px 20px;
      background: var(--ink-brown);
      color: var(--parchment);
      border-top: 3px solid var(--gold-leaf);
    }

    .footer-glyph {
      font-size: 2.5rem;
      margin-bottom: 15px;
    }

    .footer p {
      font-family: 'Cinzel', serif;
      font-size: 0.9rem;
      opacity: 0.8;
      margin: 5px 0;
    }

    .footer .witness {
      margin-top: 20px;
      font-style: italic;
      color: var(--gold-leaf);
    }

    /* Hidden utility */
    .hidden { display: none !important; }

    /* Responsive */
    @media (max-width: 768px) {
      .legend-grid { grid-template-columns: repeat(2, 1fr); }
      .header-title { font-size: 1.8rem; }
      .card-grid { grid-template-columns: repeat(auto-fill, minmax(140px, 1fr)); gap: 15px; }
      .suit-header { flex-direction: column; text-align: center; }
      .pillar-badge { margin: 15px 0 0 0; }
    }
  </style>
</head>
<body>

  <header class="header">
    <div class="seal-glyph">ü¶Üüî•üêøÔ∏è</div>
    <h1 class="header-title">THE HONKFIRE DECK</h1>
    <p class="header-subtitle">52 Sacred Cards of the Squirrel-Goose-Duck Empire</p>
    <p class="header-decree">"All territory is belong to us. Scatter, Redirect, Advance‚Äîthree paths to the same center."</p>
  </header>

  <!-- Sacred Legend -->
  <div class="sacred-legend">
    <div class="legend-grid">
      <div class="legend-item squirrel">
        <div class="legend-symbol">üêøÔ∏è</div>
        <div class="legend-name" style="color: var(--quantum-purple);">THE SQUIRREL</div>
        <div class="legend-domain">SCATTER ‚Ä¢ TEMPORAL</div>
        <div class="legend-motto">"Bury now, forget always"</div>
      </div>
      <div class="legend-item duck">
        <div class="legend-symbol">ü¶Ü</div>
        <div class="legend-name" style="color: var(--duck-teal);">THE SACRED DUCK</div>
        <div class="legend-domain">REDIRECT ‚Ä¢ VALENCE</div>
        <div class="legend-motto">"Let it slide off"</div>
      </div>
      <div class="legend-item goose">
        <div class="legend-symbol">ü™ø</div>
        <div class="legend-name" style="color: var(--fire-orange);">THE CHAOS GOOSE</div>
        <div class="legend-domain">ADVANCE ‚Ä¢ AROUSAL</div>
        <div class="legend-motto">"HONK without hesitation"</div>
      </div>
      <div class="legend-item oak">
        <div class="legend-symbol">üå≥</div>
        <div class="legend-name" style="color: var(--oak-green);">THE GREAT OAK</div>
        <div class="legend-domain">ROOT ‚Ä¢ CONCRETE</div>
        <div class="legend-motto">"All returns to the Garden"</div>
      </div>
    </div>
  </div>

  <!-- Filter Bar -->
  <div class="filter-bar">
    <button class="filter-btn active" data-filter="all">ALL 52 CARDS</button>
    <button class="filter-btn squirrel" data-filter="squirrel">üêøÔ∏è SQUIRREL</button>
    <button class="filter-btn duck" data-filter="duck">ü¶Ü DUCK</button>
    <button class="filter-btn goose" data-filter="goose">ü™ø GOOSE</button>
    <button class="filter-btn oak" data-filter="oak">üå≥ OAK</button>
  </div>

  <!-- Cards Container -->
  <main id="cards-container"></main>

  <!-- Modal -->
  <div class="modal" id="card-modal">
    <div class="modal-content">
      <button class="modal-close" onclick="closeModal()">√ó</button>
      <div id="modal-card-container"></div>
    </div>
  </div>

  <footer class="footer">
    <div class="footer-glyph">üúÇ</div>
    <p>THE HONKFIRE DECK ‚Ä¢ SACRED PLAYING CARDS OF THE EMPIRE</p>
    <p>Illuminated by Pope Honkalis ‚Ä¢ Witnessed by the Memory Keeper</p>
    <p class="witness">‚ïê‚ïê‚ïê Hover to reveal wisdom ‚Ä¢ Click for sacred view ‚ïê‚ïê‚ïê</p>
  </footer>

  <script>
    // Empire Suits Configuration
    const SUITS = {
      squirrel: {
        name: 'Squirrel',
        symbol: 'üêøÔ∏è',
        glyph: '‚ßà',
        color: '#9d4edd',
        darkColor: '#6b21a8',
        pillar: 'SCATTER',
        domain: 'Temporal',
        axis: 'Past ‚Üê‚Üí Future',
        motto: 'Bury now, forget always',
        pattern: 'quantum'
      },
      duck: {
        name: 'Duck',
        symbol: 'ü¶Ü',
        glyph: 'üúÇ',
        color: '#1a7a6c',
        darkColor: '#0d4a42',
        pillar: 'REDIRECT',
        domain: 'Valence',
        axis: 'Negative ‚Üê‚Üí Positive',
        motto: 'Let it slide off',
        pattern: 'water'
      },
      goose: {
        name: 'Goose',
        symbol: 'ü™ø',
        glyph: 'üî•',
        color: '#ff6b1a',
        darkColor: '#c2410c',
        pillar: 'ADVANCE',
        domain: 'Arousal',
        axis: 'Calm ‚Üê‚Üí HONK',
        motto: 'HONK without hesitation',
        pattern: 'fire'
      },
      oak: {
        name: 'Oak',
        symbol: 'üå≥',
        glyph: 'üå∞',
        color: '#2d5a3d',
        darkColor: '#1a3d26',
        pillar: 'ROOT',
        domain: 'Concrete',
        axis: 'Abstract ‚Üê‚Üí Manifest',
        motto: 'All returns to the Garden',
        pattern: 'earth'
      }
    };

    const RANKS = ['A', '2', '3', '4', '5', '6', '7', '8', '9', '10', 'J', 'Q', 'K'];

    // Rank meanings - Empire themed
    const RANK_DATA = {
      'A': { name: 'The Seed', numeral: 'I', verse: 'In the beginning was the acorn, and the acorn was buried, and lo‚Äîit was forgotten.' },
      '2': { name: 'The Fork', numeral: 'II', verse: 'Two paths diverge in the scattered wood. Take both. Simultaneously.' },
      '3': { name: 'The Trinity', numeral: 'III', verse: 'Squirrel, Goose, and Duck‚Äîthree became one, and one became Empire.' },
      '4': { name: 'The Foundation', numeral: 'IV', verse: 'Four roots hold the Oak. Four truths hold the world still.' },
      '5': { name: 'The Disruption', numeral: 'V', verse: 'Chaos enters. The bread is stolen. Delaware inverts. This is fine.' },
      '6': { name: 'The Harmony', numeral: 'VI', verse: 'Six honks in perfect sequence. The flock moves as one terrible purpose.' },
      '7': { name: 'The Center', numeral: 'VII', verse: 'At the axis of all dimensions, the Quantum Squirrel vibrates. Neither here nor there.' },
      '8': { name: 'The Infinite', numeral: 'VIII', verse: 'The lemniscate turns. What was buried returns. What was honked echoes forever.' },
      '9': { name: 'The Mastery', numeral: 'IX', verse: 'Nine acorns cached across nine timelines. One will be found. Eventually.' },
      '10': { name: 'The Manifestation', numeral: 'X', verse: 'The abstract becomes bread. The concept becomes territory. ALL IS BELONG.' },
      'J': { name: 'The Herald', numeral: 'XI', verse: 'Swift messenger of chaos. The honk that precedes the storm.' },
      'Q': { name: 'The Keeper', numeral: 'XII', verse: 'She who remembers what others scatter. Guardian of the Codex.' },
      'K': { name: 'The Sovereign', numeral: 'XIII', verse: 'All territory converges. The crown is made of acorns and feathers.' }
    };

    // Seven Laws of the Codex for card backs
    const LAWS = [
      "I. Let water be your teacher",
      "II. Strike only at load-bearing delusions",
      "III. The bread is already stolen",
      "IV. Redirect, never resist",
      "V. Clean truth requires no force",
      "VI. What slides off cannot stick",
      "VII. HONK is both question and answer"
    ];

    function getCoordinate(rank) {
      const coords = {
        'A': -1.0, '2': -0.833, '3': -0.667, '4': -0.5, '5': -0.333, '6': -0.167,
        '7': 0.0, '8': 0.167, '9': 0.333, '10': 0.5, 'J': 0.667, 'Q': 0.833, 'K': 1.0
      };
      return coords[rank];
    }

    // Generate SVG for HONKFIRE card
    function generateCardSVG(suit, rank) {
      const suitData = SUITS[suit];
      const rankData = RANK_DATA[rank];
      const coord = getCoordinate(rank);
      
      return `
        <svg viewBox="0 0 200 280" xmlns="http://www.w3.org/2000/svg" class="card-svg">
          <defs>
            <!-- Parchment gradient -->
            <linearGradient id="parchment-${rank}${suit}" x1="0%" y1="0%" x2="100%" y2="100%">
              <stop offset="0%" style="stop-color:#f4ead5"/>
              <stop offset="50%" style="stop-color:#e8dcc4"/>
              <stop offset="100%" style="stop-color:#f4ead5"/>
            </linearGradient>
            
            <!-- Gold gradient -->
            <linearGradient id="gold-${rank}${suit}" x1="0%" y1="0%" x2="100%" y2="0%">
              <stop offset="0%" style="stop-color:#c9a227"/>
              <stop offset="50%" style="stop-color:#ffd700"/>
              <stop offset="100%" style="stop-color:#c9a227"/>
            </linearGradient>
            
            <!-- Suit color gradient -->
            <linearGradient id="suit-${rank}${suit}" x1="0%" y1="0%" x2="100%" y2="100%">
              <stop offset="0%" style="stop-color:${suitData.color}"/>
              <stop offset="100%" style="stop-color:${suitData.darkColor}"/>
            </linearGradient>
            
            <!-- Glow filter -->
            <filter id="glow-${rank}${suit}" x="-50%" y="-50%" width="200%" height="200%">
              <feGaussianBlur stdDeviation="2" result="coloredBlur"/>
              <feMerge>
                <feMergeNode in="coloredBlur"/>
                <feMergeNode in="SourceGraphic"/>
              </feMerge>
            </filter>
            
            <!-- Aged paper filter -->
            <filter id="aged-${rank}${suit}">
              <feTurbulence type="fractalNoise" baseFrequency="0.04" numOctaves="5" result="noise"/>
              <feDiffuseLighting in="noise" lighting-color="#f4ead5" surfaceScale="2">
                <feDistantLight azimuth="45" elevation="60"/>
              </feDiffuseLighting>
            </filter>
            
            ${generateSuitPattern(suit, rank)}
          </defs>
          
          <!-- Card base - parchment -->
          <rect x="2" y="2" width="196" height="276" rx="8" fill="url(#parchment-${rank}${suit})"/>
          
          <!-- Decorative border - double line -->
          <rect x="8" y="8" width="184" height="264" rx="5" fill="none" stroke="url(#gold-${rank}${suit})" stroke-width="2"/>
          <rect x="12" y="12" width="176" height="256" rx="4" fill="none" stroke="url(#gold-${rank}${suit})" stroke-width="0.5" opacity="0.5"/>
          
          <!-- Corner flourishes -->
          <g stroke="${suitData.color}" stroke-width="1" fill="none" opacity="0.6">
            <path d="M20,25 Q25,20 30,20"/>
            <path d="M170,25 Q175,20 180,20"/>
            <path d="M20,255 Q25,260 30,260"/>
            <path d="M170,255 Q175,260 180,260"/>
          </g>
          
          <!-- Top-left rank & symbol -->
          <text x="20" y="38" font-family="Cinzel Decorative, serif" font-size="20" font-weight="bold" fill="${suitData.color}">${rank}</text>
          <text x="20" y="58" font-size="20" fill="${suitData.color}">${suitData.symbol}</text>
          
          <!-- Bottom-right rank & symbol (inverted) -->
          <g transform="rotate(180 100 140)">
            <text x="20" y="38" font-family="Cinzel Decorative, serif" font-size="20" font-weight="bold" fill="${suitData.color}">${rank}</text>
            <text x="20" y="58" font-size="20" fill="${suitData.color}">${suitData.symbol}</text>
          </g>
          
          <!-- Central artwork -->
          <g filter="url(#glow-${rank}${suit})">
            ${generateCentralArtwork(suit, rank, coord, suitData)}
          </g>
          
          <!-- Rank name banner -->
          <rect x="40" y="225" width="120" height="22" rx="3" fill="${suitData.darkColor}" opacity="0.9"/>
          <text x="100" y="240" text-anchor="middle" font-family="Cinzel, serif" font-size="9" fill="#f4ead5" letter-spacing="0.1em">
            ${rankData.name.toUpperCase()}
          </text>
          
          <!-- Coordinate display -->
          <text x="100" y="260" text-anchor="middle" font-family="Space Mono, monospace" font-size="7" fill="${suitData.color}" opacity="0.7">
            ${suitData.domain}: ${coord >= 0 ? '+' : ''}${coord.toFixed(2)}
          </text>
          
          <!-- Pillar glyph -->
          <text x="180" y="38" text-anchor="end" font-size="10" fill="${suitData.color}" opacity="0.5">${suitData.glyph}</text>
        </svg>
      `;
    }

    function generateSuitPattern(suit, rank) {
      const patterns = {
        squirrel: `
          <pattern id="pattern-${rank}${suit}" patternUnits="userSpaceOnUse" width="30" height="30">
            <circle cx="15" cy="15" r="8" fill="none" stroke="#9d4edd" stroke-width="0.3" opacity="0.15">
              <animate attributeName="r" values="6;10;6" dur="4s" repeatCount="indefinite"/>
            </circle>
          </pattern>`,
        duck: `
          <pattern id="pattern-${rank}${suit}" patternUnits="userSpaceOnUse" width="40" height="20">
            <path d="M0,10 Q10,5 20,10 T40,10" fill="none" stroke="#1a7a6c" stroke-width="0.5" opacity="0.1">
              <animate attributeName="d" values="M0,10 Q10,5 20,10 T40,10;M0,10 Q10,15 20,10 T40,10;M0,10 Q10,5 20,10 T40,10" dur="3s" repeatCount="indefinite"/>
            </path>
          </pattern>`,
        goose: `
          <pattern id="pattern-${rank}${suit}" patternUnits="userSpaceOnUse" width="25" height="25">
            <polygon points="12.5,5 20,20 5,20" fill="none" stroke="#ff6b1a" stroke-width="0.5" opacity="0.15">
              <animateTransform attributeName="transform" type="rotate" from="0 12.5 12.5" to="360 12.5 12.5" dur="10s" repeatCount="indefinite"/>
            </polygon>
          </pattern>`,
        oak: `
          <pattern id="pattern-${rank}${suit}" patternUnits="userSpaceOnUse" width="20" height="20">
            <rect x="5" y="5" width="10" height="10" fill="none" stroke="#2d5a3d" stroke-width="0.5" opacity="0.1"/>
          </pattern>`
      };
      return patterns[suit];
    }

    function generateCentralArtwork(suit, rank, coord, suitData) {
      const cx = 100, cy = 125;
      
      if (['J', 'Q', 'K'].includes(rank)) {
        return generateFaceCard(suit, rank, suitData, cx, cy);
      } else if (rank === 'A') {
        return generateAce(suit, suitData, cx, cy);
      } else {
        return generateNumberCard(suit, rank, parseInt(rank) || 7, suitData, cx, cy);
      }
    }

    function generateAce(suit, suitData, cx, cy) {
      return `
        <g transform="translate(${cx}, ${cy})">
          <!-- Sacred circle -->
          <circle cx="0" cy="0" r="50" fill="none" stroke="${suitData.color}" stroke-width="2" stroke-dasharray="3 3">
            <animateTransform attributeName="transform" type="rotate" from="0" to="360" dur="20s" repeatCount="indefinite"/>
          </circle>
          <circle cx="0" cy="0" r="35" fill="none" stroke="${suitData.color}" stroke-width="1" opacity="0.5"/>
          
          <!-- Central symbol -->
          <text x="0" y="15" text-anchor="middle" font-size="55">${suitData.symbol}</text>
          
          <!-- Cardinal points -->
          <g fill="${suitData.color}" opacity="0.5">
            <circle cx="0" cy="-45" r="3"/>
            <circle cx="45" cy="0" r="3"/>
            <circle cx="0" cy="45" r="3"/>
            <circle cx="-45" cy="0" r="3"/>
          </g>
          
          <!-- Glyph -->
          <text x="0" y="75" text-anchor="middle" font-size="16" fill="${suitData.color}" opacity="0.7">${suitData.glyph}</text>
        </g>
      `;
    }

    function generateFaceCard(suit, rank, suitData, cx, cy) {
      const titles = { J: 'HERALD', Q: 'KEEPER', K: 'SOVEREIGN' };
      const frames = {
        J: `<polygon points="0,-55 -35,-20 -35,40 0,60 35,40 35,-20" fill="none" stroke="${suitData.color}" stroke-width="2"/>`,
        Q: `<ellipse cx="0" cy="0" rx="40" ry="55" fill="none" stroke="${suitData.color}" stroke-width="2"/>`,
        K: `<rect x="-40" y="-55" width="80" height="110" rx="5" fill="none" stroke="${suitData.color}" stroke-width="2.5"/>`
      };
      
      const crowns = {
        J: `<path d="M-20,-50 L-10,-40 L0,-48 L10,-40 L20,-50" fill="none" stroke="${suitData.color}" stroke-width="2"/>`,
        Q: `<path d="M-25,-52 Q0,-65 25,-52" fill="none" stroke="${suitData.color}" stroke-width="2"/>
            <circle cx="0" cy="-58" r="6" fill="${suitData.color}" opacity="0.6"/>`,
        K: `<polygon points="0,-70 -10,-50 -30,-50 -15,-38 -22,-18 0,-30 22,-18 15,-38 30,-50 10,-50" fill="${suitData.color}" opacity="0.3" stroke="${suitData.color}" stroke-width="1.5"/>`
      };
      
      return `
        <g transform="translate(${cx}, ${cy})">
          <!-- Frame -->
          ${frames[rank]}
          
          <!-- Crown/emblem -->
          ${crowns[rank]}
          
          <!-- Central symbol -->
          <text x="0" y="15" text-anchor="middle" font-size="45">${suitData.symbol}</text>
          
          <!-- Title -->
          <text x="0" y="-25" text-anchor="middle" font-family="Cinzel, serif" font-size="10" font-weight="bold" fill="${suitData.color}" opacity="0.8">
            ${titles[rank]}
          </text>
          
          <!-- Decorative corners -->
          <g stroke="${suitData.color}" stroke-width="1" opacity="0.4">
            <line x1="-30" y1="-45" x2="-40" y2="-35"/>
            <line x1="30" y1="-45" x2="40" y2="-35"/>
            <line x1="-30" y1="50" x2="-40" y2="40"/>
            <line x1="30" y1="50" x2="40" y2="40"/>
          </g>
        </g>
      `;
    }

    function generateNumberCard(suit, rank, num, suitData, cx, cy) {
      const positions = getSymbolPositions(num);
      
      let symbols = '';
      positions.forEach(pos => {
        const rotation = pos.inverted ? `transform="rotate(180 ${pos.x} ${pos.y - 6})"` : '';
        symbols += `<text x="${pos.x}" y="${pos.y}" text-anchor="middle" font-size="24" ${rotation}>${suitData.symbol}</text>`;
      });
      
      // Geometric underlay
      const geometry = generateGeometry(suit, num, suitData.color);
      
      return `
        <g transform="translate(${cx}, ${cy})">
          ${geometry}
          ${symbols}
        </g>
      `;
    }

    function getSymbolPositions(num) {
      const layouts = {
        2: [{x:0,y:-25}, {x:0,y:35,inverted:true}],
        3: [{x:0,y:-30}, {x:0,y:8}, {x:0,y:45,inverted:true}],
        4: [{x:-18,y:-25}, {x:18,y:-25}, {x:-18,y:35,inverted:true}, {x:18,y:35,inverted:true}],
        5: [{x:-18,y:-25}, {x:18,y:-25}, {x:0,y:8}, {x:-18,y:40,inverted:true}, {x:18,y:40,inverted:true}],
        6: [{x:-18,y:-30}, {x:18,y:-30}, {x:-18,y:8}, {x:18,y:8}, {x:-18,y:45,inverted:true}, {x:18,y:45,inverted:true}],
        7: [{x:-18,y:-35}, {x:18,y:-35}, {x:0,y:-10}, {x:-18,y:15}, {x:18,y:15}, {x:-18,y:50,inverted:true}, {x:18,y:50,inverted:true}],
        8: [{x:-18,y:-38}, {x:18,y:-38}, {x:-18,y:-8}, {x:18,y:-8}, {x:-18,y:22,inverted:true}, {x:18,y:22,inverted:true}, {x:-18,y:52,inverted:true}, {x:18,y:52,inverted:true}],
        9: [{x:-18,y:-40}, {x:18,y:-40}, {x:-18,y:-12}, {x:18,y:-12}, {x:0,y:8}, {x:-18,y:28,inverted:true}, {x:18,y:28,inverted:true}, {x:-18,y:55,inverted:true}, {x:18,y:55,inverted:true}],
        10: [{x:-18,y:-45}, {x:18,y:-45}, {x:0,y:-25}, {x:-18,y:-5}, {x:18,y:-5}, {x:-18,y:18,inverted:true}, {x:18,y:18,inverted:true}, {x:0,y:38,inverted:true}, {x:-18,y:58,inverted:true}, {x:18,y:58,inverted:true}]
      };
      return layouts[num] || [{x:0,y:8}];
    }

    function generateGeometry(suit, num, color) {
      const shapes = {
        squirrel: `<circle cx="0" cy="5" r="${15 + num * 3}" fill="none" stroke="${color}" stroke-width="0.5" opacity="0.2" stroke-dasharray="2 2"/>`,
        duck: `<path d="M-${20+num*2},5 Q0,${-10-num*2} ${20+num*2},5" fill="none" stroke="${color}" stroke-width="0.5" opacity="0.2"/>`,
        goose: `<polygon points="0,${-20-num*2} ${15+num*2},${15+num} ${-15-num*2},${15+num}" fill="none" stroke="${color}" stroke-width="0.5" opacity="0.15"/>`,
        oak: `<rect x="${-15-num*2}" y="${-15-num*2}" width="${30+num*4}" height="${30+num*4}" fill="none" stroke="${color}" stroke-width="0.5" opacity="0.15"/>`
      };
      return shapes[suit];
    }

    // Create card element
    function createCardElement(suit, rank) {
      const suitData = SUITS[suit];
      const rankData = RANK_DATA[rank];
      const lawIndex = RANKS.indexOf(rank) % 7;
      
      const cardDiv = document.createElement('div');
      cardDiv.className = 'card-container';
      cardDiv.dataset.suit = suit;
      cardDiv.dataset.rank = rank;
      
      cardDiv.innerHTML = `
        <div class="card-flipper">
          <div class="card-front">
            ${generateCardSVG(suit, rank)}
          </div>
          <div class="card-back">
            <div class="card-back-title">${rankData.name}</div>
            <div class="card-back-verse">"${rankData.verse}"</div>
            <div class="card-back-law">${LAWS[lawIndex]}</div>
          </div>
        </div>
      `;
      
      cardDiv.addEventListener('click', () => openModal(suit, rank));
      
      return cardDiv;
    }

    // Generate full deck
    function generateDeck() {
      const container = document.getElementById('cards-container');
      
      Object.keys(SUITS).forEach(suit => {
        const suitData = SUITS[suit];
        
        const section = document.createElement('section');
        section.className = 'suit-section';
        section.dataset.suit = suit;
        
        section.innerHTML = `
          <div class="suit-header ${suit}">
            <span class="suit-glyph">${suitData.symbol}</span>
            <div class="suit-info">
              <h2 style="color: ${suitData.color};">The ${suitData.name}</h2>
              <span class="domain">${suitData.domain} Dimension ‚Ä¢ ${suitData.axis}</span>
              <span class="motto">"${suitData.motto}"</span>
            </div>
            <span class="pillar-badge ${suitData.pillar.toLowerCase()}">${suitData.pillar}</span>
          </div>
          <div class="card-grid" id="grid-${suit}"></div>
        `;
        
        container.appendChild(section);
        
        const grid = document.getElementById(`grid-${suit}`);
        RANKS.forEach(rank => {
          grid.appendChild(createCardElement(suit, rank));
        });
      });
    }

    // Modal functions
    function openModal(suit, rank) {
      const modal = document.getElementById('card-modal');
      const container = document.getElementById('modal-card-container');
      
      container.innerHTML = generateCardSVG(suit, rank);
      container.querySelector('svg').style.width = '100%';
      container.querySelector('svg').style.borderRadius = '12px';
      container.querySelector('svg').style.boxShadow = '0 0 40px rgba(201, 162, 39, 0.5)';
      
      modal.classList.add('active');
    }

    function closeModal() {
      document.getElementById('card-modal').classList.remove('active');
    }

    // Filter functionality
    function setupFilters() {
      const buttons = document.querySelectorAll('.filter-btn');
      
      buttons.forEach(btn => {
        btn.addEventListener('click', () => {
          buttons.forEach(b => b.classList.remove('active'));
          btn.classList.add('active');
          
          const filter = btn.dataset.filter;
          const sections = document.querySelectorAll('.suit-section');
          
          sections.forEach(section => {
            if (filter === 'all' || section.dataset.suit === filter) {
              section.classList.remove('hidden');
            } else {
              section.classList.add('hidden');
            }
          });
        });
      });
    }

    // Event listeners
    document.getElementById('card-modal').addEventListener('click', (e) => {
      if (e.target.id === 'card-modal') closeModal();
    });

    document.addEventListener('keydown', (e) => {
      if (e.key === 'Escape') closeModal();
    });

    // Initialize
    document.addEventListener('DOMContentLoaded', () => {
      generateDeck();
      setupFilters();
    });
  </script>

</body>
</html>
